<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="Bluefish 2.2.12" >
  <meta http-equiv="content-type" content=
  "text/html; charset=utf-8">
  <title>Guide to Ublu</title>
  <meta content="Jack J. Woehr" name="author">
  <meta content=
  "Guide to the Ublu Midrange and Mainframe Life Cycle Extension Language"
  name="description">
  <link rel="stylesheet" type="text/css" href="ublujedit.css">
  <meta http-equiv="Last-Modified" content=
  "Sun, 6 Feb UTC 08:27:26 PM">
</head>
<body>
  <table cellspacing="0" height="456" cellpadding="2" width="100%"
  border="0">
    <tbody>
      <tr>
        <td bgcolor="#000000" valign="middle" align="center">
          <font color="#66FFFF"><big><big>Guide</big></big><br>
          to the<br></font>
          <h1><a class="mozTocH1" name="mozTocId88081" id=
          "mozTocId88081"></a><font color="#66FFFF">Ublu</font>
          </h1>
          <font color="#66FFFF">Midrange and Mainframe<br>
          Life Cycle Extension Language<br></font>
        </td>
        <th bgcolor="#000000" valign="middle" align="center">
        <img alt="NASA JPL Candle in Space" title=
        "NASA JPL Candle in Space" src="images/Candlespace.jpg"
        height="444" width="400"><br>
        </th>
        <td bgcolor="#000000" valign="middle" align="center">
        <font color="#33FFFF">Copyright &#169; 2016, 2022 Jack. J.
        Woehr</font><br>
        <font color="#33FFFF"><font color=
        "#33FFFF">jwoehr@softwoehr.com<br></font> &nbsp;All Rights
        Reserved<br>
        <br>
        SoftWoehr LLC<br>
        <a href="http://www.softwoehr.com" target=
        "_blank">http://www.softwoehr.com</a><br>
        PO Box 51<br>
        Golden, CO 80402-0051<br>
        USA</font>
        </td>
      </tr>
    </tbody>
  </table>

  <h2><a class="mozTocH1" name="mozTocId986452" id=
  "mozTocId986452"></a> Table of Contents</h2>

  <ul id="mozToc">
    <!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6-->

    <li>
      <a href="#mozTocId88081">Ublu</a>
      <ul>
        <li>
          <a href="#mozTocId986452">Table of Contents</a>
        </li>

        <li>
          <a href="#mozTocId754622">Who is this Guide for?</a>
        </li>

        <li>
          <a href="#mozTocId185961">Why Ublu?</a>
        </li>

        <li>
          <a href="#mozTocId809903">What does Ublu do?</a>
        </li>

        <li>
          <a href="#mozTocId190420">Work in Progress</a>
        </li>

        <li>
          <a href="#Discussing_Ublu">Discussing Ublu Online</a>
        </li>

        <li>
          <a href="#Invoking_Ublu%3C">Invoking Ublu</a>
        </li>

        <li>
          <a href="#Typical_Installation">A Typical
          Installation</a>
          <ul>
            <li>
              <a href="#Starnix_Installation">Linux/Mac/OpenBSD</a>
            </li>

            <li>
              <a href="#Windows_Installation">Windows</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#mozTocId723509">Quick Tour of the Ublu
          Language</a>
          <ul>
            <li>
              <a href="#mozTocId190571">Overview</a>
            </li>

            <li>
              <a href="#mozTocId994066">Commands</a>
            </li>

            <li>
              <a href="#mozTocId117788">Language Interpreter</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#mozTocId185354">A Full Ublu Program</a>
          <ul>
            <li>
              <a href="#mozTocId152770">examples/autoreply.ublu</a>
            </li>

            <li>
              <a href="#mozTocId987283">Understanding
              examples/autoreply.ublu</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#mozTocId10736">Generating launcher scripts for
          Ublu programs via gensh</a>
          <ul>
            <li>
              <a href="#mozTocId850587">examples/autoreply.sh</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#mozTocId625051">Some Obvious Questions about
          Ublu</a>
          <ul>
            <li>
              <a href="#mozTocId772969">What are the data types in
              Ublu?</a>
            </li>

            <li>
              <a href="#mozTocId379708">What are those dash
              thingies after Ublu commands?</a>
            </li>

            <li>
              <a href="#mozTocId58628">What is a put ?</a>
            </li>

            <li>
              <a href="#tuple-assign"><code>tuple -assign</code>
              instead of <code>put</code></a>
            </li>

            <li>
              <a href="#mozTocId56861">How are arguments
              passed?</a>
              <ul>
                <li>
                  <a href="#mozTocId154189">Local variables as
                  arguments</a>
                  <ul>
                    <li>
                      <a href="#mozTocId856951">A limit on local
                      variables as arguments</a>
                      <ul>
                        <li>
                          <a href=
                          "#mozTocId334710">examples/localvarthread</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>

        <li>
          <a href="#mozTocId241059">The examples directory</a>
          <ul>
            <li>
              <a href="#mozTocId992046">The Test Suite</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#extensions">The extensions directory</a>
        </li>

        <li>
          <a href="#mozTocId163217">Object-disoriented</a>
          <ul>
            <li>
              <a href="#Autonomes">Autonomes offer easier
              syntax</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#TupleStack">The Tuple Stack</a>
        </li>

        <li>
          <a href="#Calling_Java">Calling Java</a>
        </li>

        <li>
          <a href="#Goublu">Goublu, the enhanced Ublu console</a>
        </li>

        <li>
          <a href="#Ublu_as_window">Running Ublu as a window</a>
        </li>

        <li>
          <a href="#Ublu_Android">Running Ublu on Android</a>
          <ul>
            <li>
              <a href="#GNURootDebian">GNURootDebian (before
              Android 8)</a>
            </li>

            <li>
              <a href="#UserLAnd_Ubuntu">UserLAnd Ubuntu (Android 8
              and above)</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#mozTocId722916">Notes</a>
          <ul>
            <li>
              <a href=
              "#mozTocId810320">ublu.util.Interpreter.loop()</a>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <h2><a class="mozTocH2" name="mozTocId754622" id=
  "mozTocId754622"></a>Who is this Guide for?</h2>

  <p>It's for people who just want an introduction to using Ublu,
  or who have downloaded and built Ublu, read enough of the
  <a href="./ubluref.html" target="_blank">Ublu Reference</a> to
  know how to launch <a href="https://github.com/jwoehr/ublu"
  target="_blank">Ublu</a>, and now want more help understanding
  Ublu.</p>

  <p>The Guide is meant to be easy to read, and extra stuff you may
  not want to bother with is written <small><em>like this in small
  italics</em><big>.</big></small></p>

  <h2><a class="mozTocH2" name="mozTocId185961" id=
  "mozTocId185961"></a>Why Ublu?</h2>

  <p>Ublu is an interpretive language for remote systems
  programming of midrange or mainframe hosts from a Java platform
  such as Linux, Mac, OpenBSD or Windows. It also can run natively
  on IBM i &#174;, IBM z/OS USS &#174; or any other reasonable Java
  platform.</p>

  <p>I wrote Ublu because I wanted a language to run on
  OpenBSD/Mac/Linux/Windows to perform ad-hoc process automation
  primarily on IBM i Series OS &#174;. I was supporting consulting
  clients by writing individual utility programs using JTOpen which
  I have used since 1998 to control the AS/400. I decided to
  consolidate the programs in a language, and the result is
  Ublu.</p>

  <p>Additionally, Ublu can call Java directly allowing the user
  him- or herself to extend the language interpretively in nearly
  any direction desired.</p>

  <p>It is convenient to operate legacy systems remotely from
  modern environments:</p>

  <ul>
    <li>Use Ublu to empower help-desk folks who know how to feed
    arguments to scripts and answer interactive prompts but are
    challenged by the green screen.</li>

    <li>Intermediate programmers use Ublu as an easy entry point to
    legacy systems programming.<br></li>

    <li>Teams working to design add-ons or extensions to legacy
    applications can use Ublu.</li>

    <li>Teams designing follow-on systems who need to explore the
    legacy environment can use Ublu.</li>

    <li>Ublu also runs locally on IBM i Series OS and is sometimes
    used to model programs which later may be written in straight
    Java to run locally on the server.</li>
  </ul>

  <p><small><em>I also previously wrote <a href=
  "http://pigiron.sourceforge.net/">PigIron</a>, a Java bridge to
  IBM z/VM &#174; System Management API <a href=
  "https://www.ibm.com/support/knowledgecenter/SSB27U_6.3.0/com.ibm.zvm.v630.dmse6/toc.htm?lang=en">
  (SMAPI)</a>. I provide PigIron support in Ublu. I had been using
  my <a href="http://fiji.sourceforge.net/" target="_blank">FIJI
  ForthIsh Java Interpreter</a> to drive PigIron, which works very
  well but is arcane, and also <a href="http://www.oorexx.org/"
  target="_blank">ObjectRexx</a>, which is a wonderful language
  which doesn't run on as many platforms as Java. Ublu turns out to
  be an excellent language environment for PigIron SMAPI
  operations.</em></small>
  </p>

  <p>Ublu is a new language which was coded quick and easy in Java
  on top of other open source libraries. The "quick and easy"
  approach derives from a work environment in which folks just
  wanted results and had no particular interest in the language
  itself.</p>

  <p>Ublu is easy to build, install, read, and use. It is handsome
  but not beautiful. Ublu works like an interactive shell scripting
  language but also has some advanced language features such as
  compiling, tasking, debugging and a TCP/IP port server mode.</p>

  <h2><a class="mozTocH2" name="mozTocId809903" id=
  "mozTocId809903"></a>What does Ublu do?</h2>

  <ul>
    <li>Ublu is an interpreter with full language features such as
    flow control (<code>IF ELSE DO WHILE</code> etc.), exception
    handling, and even a multitasker and debugger.</li>

    <li>Ublu has commands that manipulate Java objects representing
    objects, services and various facilities on the remote
    server.</li>

    <li>In Ublu you can define functions to create complex programs
    to manipulate the remote server and its databases, tape drives,
    whatever.</li>

    <li>You can also do <a href=
    "http://www.postgresql.org/">Postgresql</a> databasing (and
    pretty much anything else) on your local computer, allowing you
    to interoperate your local database with the database on the
    remote server.
    </li>

    <li>You can do this interactively or load a program from text
    files which can, in turn, <a href=
    "./ubluref.html#include"><code>include</code></a> other text
    files.
    </li>

    <li>You can automate a telnet 5250 terminal emulator
    session.<br></li>

    <li>You can interact directly with the underlying Java and
    class libraries.</li>
  </ul>

  <p>When you've got your complete application written in Ublu,
  there's an Ublu command <a href=
  "#mozTocId10736"><code>gensh</code></a> which autogenerates a
  shell script to work under either <code>bash</code> or
  <code>ksh</code>. The script takes arguments via command-line
  switches and pass them to your program's top-level function.
  <small><em>The script effects a closure on your top-level
  function.</em></small></p>

  <p>For a formal summary of everything, see the <a href=
  "ubluref.html">Ublu Reference</a>. That Reference tells you how
  to install and run Ublu and lists the Open Source project
  dependencies as well as documenting every command and facility
  built into Ublu.</p>

  <h2><a class="mozTocH3" name="mozTocId190420" id=
  "mozTocId190420"></a>Work in Progress</h2>

  <p>Ublu is a work in progress and, like all "living" software,
  likely to remain so. There are always more aspects to IBM i
  programming to support. Everything that's in Ublu is there
  because I/We needed it <em>right then</em>. The <code>db</code>
  command was almost the first thing added, which is effectively an
  interpretive shell around JDBC. On the other hand, we never
  needed classic record file access because everyone on staff was
  SQL-oriented and knew little about physical file access. Thus,
  only later I added the <a href=
  "ubluref.html#file"><code>file</code></a> and <code><a href=
  "ubluref.html#record">record</a></code> commands for classic
  record file access.</p>

  <p>Increasingly, Ublu is extended in Ublu itself (often using the
  <code><a href="./ubluref.html#calljava">calljava</a></code>
  command). See the <code>extensions</code> directory.</p>

  <p>If you find Ublu useful, please <a href=
  "http://www.softwoehr.com/">let me know</a>!</p>

  <p>If you find a bug, or wish to issue a feature request, you can
  <a href="https://github.com/jwoehr/ublu/issues/new" target=
  "_blank">create an issue in the issue tracker</a>.</p>

  <h2><a name="Discussing_Ublu" id="Discussing_Ublu"></a>Discussing
  Ublu Online</h2>

  <p>Currently I discuss Ublu on the <a href=
  "https://ibmioss.ryver.com/index.html#forums/1057363" target=
  "_blank">Ublu, Java &amp; JTOpen forum</a> of the <a href=
  "https://ibmioss.ryver.com/index.html" target="_blank">OSS on IBM
  i Ryver team</a>.</p>

  <h2><a name="Invoking_Ublu&lt;" id="Invoking_Ublu&lt;">Invoking
  Ublu</a>
  </h2>
  This is discussed at length in the <a href=
  "ubluref.html#Invocation">Invocation section of the
  Reference</a>, but the executive summary is that, assuming you
  unpacked in <code>/opt/ublu</code> yielding
  <code>/opt/ublu/ublu.ja</code>r and /<code>opt/ublu/lib/*</code>
  etc., then you can start simple command-line Ublu via <code>java
  -jar /opt/ublu/ublu.jar</code> or you can proceed to get fancier
  with ...
  <h2><a name="Typical_Installation" id="Typical_Installation">A
  Typical Installation</a>
  </h2>

  <h3><a name="Starnix_Installation" id=
  "Starnix_Installation">Linux/Mac/OpenBSD</a>
  </h3>

  <p>The basics are that you can run ublu, goublu, or windowing
  ublu without any of this setup if you understand the command
  lines sufficiently. But it's easier just to do it this way:</p>

  <ul>
    <li>Unzip the Ublu distribution in a permanent directory of
    your choice, say, <code>$HOME/work/ublu</code>/li&gt;</li>

    <li><code>sudo mkdir -p /opt/ublu/; cd /opt/ublu;</code>
    </li>

    <li><code>sudo ln -s $HOME/work/ublu/ublu.jar</code>
    </li>

    <li><code>sudo ln -s $HOME/work/ublu/extensions</code>
    </li>

    <li><code>sudo ln -s $HOME/work/ublu/examples</code>
    </li>

    <li><code>sudo ln -s $HOME/work/ublu/userdoc</code>
    </li>

    <li>Create config files (like these samples or altered to your
    needs) in <code>~/.config/ublu/</code>

      <pre>
<em>.config/ublu/goublu.properties (assuming you have build and installed <a href="#Goublu">Goublu</a>)</em>
<code>#Goublu properties
#Colors, directories, keystores, macros
BgColorIn=ColorBlack
FgColorIn=ColorGreen
BgColorOut=ColorBlack
FgColorOut=ColorRed
UbluDir=/opt/ublu
SaveOutDir=.
JavaOpt=-Djavax.net.ssl.trustStore=/path_to/keystore
JavaOpt=-Dublu.includepath=/opt/ublu/examples:opt/ublu/extensions
Macro=mysys as400 -to @mysys -usessl MYSYS.COM MYPROFILE</code>
<em>... etc.</em>

<em>.config/ublu/ubluwin.properties</em>
<code>#Ublu Windowing Properties
#Sun Jul 02 18:00:59 MDT 2017
UbluTextAreaBGColor=ff000000
UbluTextAreaFGColor=e3e90000
UbluTextAreaFont=Liberation Mono
UbluInputAreaFontSize=18
UbluInputAreaFontStyle=0
UbluTextAreaFontStyle=0
UbluInputAreaBGColor=ff000000
UbluInputAreaFont=Liberation Mono
UbluTextAreaFontSize=18
UbluInputAreaFGColor=ff36b80b
</code>
</pre>
    </li>

    <li>With regard to changing the default Java trust store of SSL
    certificates, see the <a href="./ubluref.html#NoteOnSSL">Note
    on SSL</a> in the Ublu Reference.
    </li>

    <li>Create aliases e.g., in <code>~/.bash_aliases</code>

      <pre>
<code>alias ublu='java -jar /opt/ublu/ublu.jar $*'
alias gu='$GOPATH/bin/goublu -g PropsFile=/home/me/.config/ublu/goublu.properties $*'
alias gw='java -Djavax.net.ssl.trustStore=/home/me/keystores/ublutruststore -jar /opt/ublu/ublu.jar -w /home/me/.config/ublu/ubluwin.properties $*'</code>
</pre>
      <ul>
        <li><font size="-1">"So why," you ask, "is the keystore
        path [for <a href="./ubluref.html#NoteOnSSL">SSL
        connectivity</a>] in the properties file for Goublu and in
        the alias for windowing Ublu?"<br>
        The answer is that <a href="#Goublu">Goublu</a> invokes
        Java to load Ublu internally, whereas the user is directly
        invoking Java on Ublu in the case of windowing Ublu.</font>
        </li>
      </ul>
    </li>
  </ul>

  <p>Now you can run Ublu:</p>

  <ul>
    <li>In a default console (<code>ublu arg arg ...</code>)</li>

    <li>In a <a href="#Goublu">goublu</a> console (<code>gu arg arg
    ...</code>)
    </li>

    <li>
      <a href="#Ublu_as_window">In a window</a> (<code>gw arg arg
      ...</code>)
    </li>
  </ul>

  <p>Of course the config files are entirely optional and can be
  added later, or reference to them omitted entirely from the
  aliases you create to invoke Ublu.</p>

  <h3><a name="Windows_Installation" id=
  "Windows_Installation">Windows</a>
  </h3>

  <ul>
    <li>Unzip in <code>C:\Ublu</code>, and create Ublu Windowing
    Properties config file as above in
    <code>C:\Users\YourLogin</code></li>

    <li>Create a shortcut with the Target <code>C:\Ublu\ublu.jar -w
    C:\Users\YourLogin\ubluwin.properties</code></li>
  </ul>

  <p>Now you can run Ublu <a href="#Ublu_as_window">in windowing
  mode</a>. Alternatively, you can just <code>java -jar
  C:\Ublu\ublu.jar</code> to run Ublu in a Windows command console,
  which works well.</p>

  <p>Here's a 256x256 Windows icon for your Ublu shortcut, save as
  <code>Ublu.ico</code> and assign to the shortcut:</p>
  <img src="images/Ublu.ico" alt="A windows icon for Ublu">
  <h2><a class="mozTocH2" name="mozTocId723509" id=
  "mozTocId723509"></a>Quick Tour of the Ublu Language</h2>

  <h3><a class="mozTocH3" name="mozTocId190571" id=
  "mozTocId190571"></a>Overview</h3>

  <p>Ublu is mostly composed of commands and a language
  interpreter. There are also are other Ublu features such as
  server mode and the tasker, but commands and the language
  interpreter are the nexus.<br></p>

  <h3><a class="mozTocH4" name="mozTocId994066" id=
  "mozTocId994066"></a>Commands</h3>

  <p>Ublu commands are like individual application programs which
  are invoked with their arguments under the language interpreter.
  Command arguments are often references to objects which have been
  created by other commands. You usually don't have to know much
  about objects passed from command to command other than what
  they're supposed to represent.<br></p>

  <p>Most arguments are passed to the <a href=
  "ubluref.html#Dash_Command">dash-commands</a> associated with the
  command, e.g.<br></p>

  <blockquote>
    <pre>
<font color="#000000"><font color=
"#009966"><strong>ask</strong></font> <font color=
"#0099FF"><strong>-to</strong></font> <font color=
"#CC00CC">@answer</font> <font color=
"#0099FF"><strong>-say</strong></font> <font color=
"#FF00CC">${</font><font color="#FF00CC"> </font><font color=
"#FF00CC">Do</font><font color="#FF00CC"> </font><font color=
"#FF00CC">you</font><font color="#FF00CC"> </font><font color=
"#FF00CC">wish</font><font color="#FF00CC"> </font><font color=
"#FF00CC">to</font><font color="#FF00CC"> </font><font color=
"#FF00CC">reply</font><font color="#FF00CC"> </font><font color=
"#FF00CC">to</font><font color="#FF00CC"> </font><font color=
"#FF00CC">this</font><font color="#FF00CC"> </font><font color=
"#FF00CC">message?</font><font color="#FF00CC"> </font><font color=
"#FF00CC">(y/n)</font><font color="#FF00CC"> </font><font color=
"#FF00CC">}$</font></font>
</pre>
  </blockquote>

  <p>The <code>ask</code> command here has two dash-commands,
  <code>-to</code> and <code>-say</code>. <code>-to</code> has an
  argument which says to which <a href=
  "ubluref.html#Tuple_Variables">variable</a> to put the answer to
  the question about to be asked the user, and <code>-say</code>
  takes a <a href="ubluref.html#Quoted_strings">quoted string</a>
  which is the prompt to the user.</p>

  <p>Here is a link to the Ublu Reference's list of <a href=
  "ubluref.html#Commands_by_Category">commands by
  category</a>.<br></p>

  <h3><a class="mozTocH4" name="mozTocId117788" id=
  "mozTocId117788"></a>Language Interpreter<br></h3>
  The heart of the Ublu language is a text interpreter loop. There
  can be multiple nested or branching interpreter instances with
  different variable spaces in one Ublu session, but basically
  they're all doing the same sort of thing: an outer input loop is
  getting input and running an inner interpretive <a href=
  "#ublu.util.Interpreter.loop">loop</a> to interpret a single line
  of text.<br>
  <br>
  <small><em>There are actually several different but very similar
  loops, e.g., the debugger interpreter loop is different from the
  normal runtime intepreter loop.</em></small><br>
  <br>
  Parsing is very simplistic. The parse parses, and having parsed,
  moves on, <a href=
  "https://www.google.com/search?q=nor+can+all+your+piety+and+wit"
  target="_blank"><em>nor can all your piety and wit</em></a> make
  it go back one <em>lex</em> (unit of parsing).<br>
  <br>
  The text interpreter loop parses the next whitespace-delimited
  element (a lex) and tries to locate it as an Ublu command or as a
  defined function. Matching is case-sensitive.<br>
  <br>
  If no match is found, the loop falls out to the outer input loop
  with an error. The outer loop then waits for more input to pass
  to the inner interpretive loop.<br>
  <br>
  If the interpretive loop succeeds in finding the next lex in the
  input as a command or function, it passes the rest of the line to
  the command or to the function interpreter. Both do their work
  then pass back the remnant of the input line that wasn't consumed
  in their work.<br>
  <br>
  Thus, line processing is a relay: the loop hands off to the
  command/function, which then hands back to loop, and on to next
  command/function ... until the line is consumed or an error is
  encountered.<br>
  <br>
  If an error is encountered, the rest of the input is discarded.
  Typically the interpretive loop will fall out to the outer
  parsing loop. However, there is a <code>TRY CATCH THROW</code>
  exception facility in Ublu allowing the program to catch errors
  without losing its place in the executing program.<br>
  <br>
  While the interpretive loop is line-oriented, certain constructs
  can span lines, particularly a delimited string or an execution
  block. Strings are delimited<br>

  <blockquote>
    <code>${ like this }$</code><br>
  </blockquote>
  and execution blocks<br>

  <blockquote>
    <code>$[ like this ]$</code><br>
  </blockquote>
  so it is easy for the loop to identify them and demand another
  line from the outer loop if the closing delimiter hasn't been
  found yet.<br>
  <br>
  Language control flow constructs are just a form of command.
  Typically they consume execution blocks from the input:<br>

  <blockquote>
    <code>IF @truefalse THEN $[ command arg arg command arg arg
    command arg ... ]$ ELSE $[ command arg ... ]$<br></code>
  </blockquote>
  As noted, these execution blocks can span multiple lines.<br>

  <h2><a class="mozTocH2" name="mozTocId185354" id=
  "mozTocId185354"></a> A Full Ublu Program</h2>
  Here is a full Ublu program. It uses <a href=
  "./ubluref.html#FUNC">FUNC</a> to define a number of functions
  allowing the user to checks a message queue on an i Series OS
  server and lists the messages, asking the user on each if s/he
  would like to reply, and parsing the reply if one is given.&nbsp;
  Take a look at the program (and its associate shell script given
  here) and then we will <a href=
  "#Understanding_examplesautoreply.ublu">discuss the program
  line-by-line</a> below.<br>
  <br>
  <em><small>The Ublu codes samples are shown in this document with
  syntax coloring from a <a href="http://www.jedit.org/" target=
  "_blank">jEdit</a> mode</small></em>
  <small><code>ublu.xml</code></small> <em><small>reproduced here
  via <a href="https://www.palfrader.org/code/code2html/" target=
  "_blank">Code2HTML.</a><br>
  The jEdit mode is in</small></em> <small><code>share/jEdit</code>
  <em>with instructions how to install it at the head of the mode
  file.</em><br></small> <em><small>There is also a <a href=
  "http://www.vim.org/" target="_blank">Vim</a> mode for Ublu
  in</small></em>
  <small><code>share/ublu-vimfiles-master</code></small>
  <em><small>. Just copy the dir structure under that directory to
  your</small></em> <small><code>$HOME/.vim</code>
  <em>directory</em></small><em><small>.</small></em><br>

  <h3><a class="mozTocH3" name="mozTocId152770" id=
  "mozTocId152770"></a><code>examples/autoreply.ublu</code>
  </h3>

  <pre>
<span class="syntax0"><span class="gutter">   1 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">autoreply.ublu</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">...</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Find</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">reply</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">all</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">*INQ</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&amp;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">*NOTIFY</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">messages</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">in</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">a</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">given</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">MSGQ</span>
<span class="gutter">   2 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">jack</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">j.</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">woehr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">jwoehr@absolute-performance.com</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">jwoehr@softwoehr.com</span>
<span class="gutter">   3 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">2015-03-10</span>
<span class="gutter">   4 </span>
<span class="gutterH">   5 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">instance</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">message</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">queue</span>
<span class="gutter">   6 </span><span class=
"syntax-KEYWORD1">FUNC</span> getMsgQ <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-KEYWORD2">system</span> <span class=
"syntax-KEYWORD2">user</span> password ifspath <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">   7 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@as400</span>
<span class="gutter">   8 </span>    <span class=
"syntax-KEYWORD2">as400</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@as400</span> <span class=
"syntax-LITERAL4">@@system</span> <span class=
"syntax-LITERAL4">@@user</span> <span class=
"syntax-LITERAL4">@@password</span>
<span class="gutter">   9 </span>    <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-LITERAL4">@@msgq</span> <span class=
"syntax-KEYWORD3">-as400</span> <span class=
"syntax-MARKUP">@as400</span> <span class=
"syntax-KEYWORD3">-instance</span> <span class=
"syntax-LITERAL4">@@ifspath</span>
<span class="gutterH">  10 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  11 </span>
<span class="gutter">  12 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">get</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">list</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">of</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">messages</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">needing</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">reply</span>
<span class="gutter">  13 </span><span class=
"syntax-KEYWORD1">FUNC</span> getReplyMsgs <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-KEYWORD2">msgq</span> replylist <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">  14 </span>    <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-KEYWORD3">--</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-LITERAL4">@@msgq</span> <span class=
"syntax-KEYWORD3">-query</span> <span class=
"syntax-KEYWORD3">-reply</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-LITERAL4">@@replylist</span>
<span class="gutterH">  15 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  16 </span>
<span class="gutter">  17 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">get</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">messages,</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">walk</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">list</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">offer</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">user</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">chance</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">reply</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">each</span>
<span class="gutter">  18 </span><span class=
"syntax-KEYWORD1">FUNC</span> autoreply <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-KEYWORD2">system</span> <span class=
"syntax-KEYWORD2">user</span> password ifspath <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">  19 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@msgq</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@replylist</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@key</span>
<span class="gutterH">  20 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@answer</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@tf</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@reply</span>
<span class="gutter">  21 </span>    getMsgQ <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-LITERAL4">@@system</span> <span class=
"syntax-LITERAL4">@@user</span> <span class=
"syntax-LITERAL4">@@password</span> <span class=
"syntax-LITERAL4">@@ifspath</span> <span class=
"syntax-MARKUP">@msgq</span> <span class="syntax-OPERATOR">)</span>
<span class="gutter">  22 </span>    getReplyMsgs <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-MARKUP">@msgq</span> <span class=
"syntax-MARKUP">@replylist</span> <span class=
"syntax-OPERATOR">)</span>
<span class="gutter">  23 </span>    <span class=
"syntax-KEYWORD1">FOR</span> <span class=
"syntax-MARKUP">@msg</span> in <span class=
"syntax-MARKUP">@replylist</span> <span class=
"syntax-OPERATOR">$[</span>
<span class="gutter">  24 </span>        <span class=
"syntax-KEYWORD2">msg</span> <span class=
"syntax-KEYWORD3">--</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-MARKUP">@msg</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@key</span> <span class=
"syntax-KEYWORD3">-key</span>
<span class="gutterH">  25 </span>        <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-from</span> <span class=
"syntax-MARKUP">@msg</span>
<span class="gutter">  26 </span>        <span class=
"syntax-KEYWORD2">ask</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@answer</span> <span class=
"syntax-KEYWORD3">-say</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Do</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">you</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">wish</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">reply</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">this</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">message?</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(y/n)</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutter">  27 </span>        <span class=
"syntax-KEYWORD2">test</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@tf</span> <span class=
"syntax-KEYWORD3">-eq</span> <span class=
"syntax-MARKUP">@answer</span> y
<span class="gutter">  28 </span>        <span class=
"syntax-KEYWORD1">IF</span> <span class=
"syntax-MARKUP">@tf</span> <span class=
"syntax-KEYWORD1">THEN</span> <span class=
"syntax-OPERATOR">$[</span>
<span class="gutter">  29 </span>            <span class=
"syntax-KEYWORD2">ask</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@reply</span> <span class=
"syntax-KEYWORD3">-say</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Please</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">enter</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">your</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">reply</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutterH">  30 </span>            <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-KEYWORD3">--</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-MARKUP">@msgq</span> <span class=
"syntax-KEYWORD3">-sendreplybinkey</span> <span class=
"syntax-MARKUP">@key</span> <span class=
"syntax-MARKUP">@reply</span>
<span class="gutter">  31 </span>            <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Reply</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">sent.</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutter">  32 </span>        <span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  33 </span>    <span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  34 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutterH">  35 </span>
</span>
</pre>
  <h3><a class="mozTocH3" name="mozTocId987283" id=
  "mozTocId987283"></a><a name=
  "Understanding_examplesautoreply.ublu" id=
  "Understanding_examplesautoreply.ublu"></a>Understanding
  <code>examples/autoreply.ublu</code></h3>

  <pre>
<span class="syntax0"><span class="gutter">   1 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">autoreply.ublu</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">...</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Find</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">reply</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">all</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">*INQ</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&amp;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">*NOTIFY</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">messages</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">in</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">a</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">given</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">MSGQ</span>
<span class="gutter">   2 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">jack</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">j.</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">woehr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">jwoehr@absolute-performance.com</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">jwoehr@softwoehr.com</span>
<span class="gutter">   3 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">2015-03-10</span>
<span class="gutter">   4 </span>
</span>
</pre>These lines are, of course, comments. Comments go to the end
of the line.<br>
  <br>
  As we discussed above, execution blocks (e.g., the body of a
  function) delimited by <code>$[</code> and <code>]$</code> can
  span lines. The way the interpretive loop does this is that it
  keeps calling for input from the outer parsing loop until it
  finds the closing delimiter. Effectively, the entire execution
  block is one line. So line comments (those commented by the
  <a href="ubluref.html#comment_introducer"><code>#</code></a>
  command) should not be placed inside function bodies or they will
  comment out the entire function body! Instead, inside functions
  use the <a href="ubluref.html#comment_quote"><code>\\</code></a>
  command.<br>

  <pre>
<span class="gutter">   6 </span><span class=
"syntax-KEYWORD1">FUNC</span> getMsgQ <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-KEYWORD2">system</span> <span class=
"syntax-KEYWORD2">user</span> password ifspath <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">   7 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@as400</span>
<span class="gutter">   8 </span>    <span class=
"syntax-KEYWORD2">as400</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@as400</span> <span class=
"syntax-LITERAL4">@@system</span> <span class=
"syntax-LITERAL4">@@user</span> <span class=
"syntax-LITERAL4">@@password</span>
<span class="gutter">   9 </span>    <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-LITERAL4">@@msgq</span> <span class=
"syntax-KEYWORD3">-as400</span> <span class=
"syntax-MARKUP">@as400</span> <span class=
"syntax-KEYWORD3">-instance</span> <span class=
"syntax-LITERAL4">@@ifspath</span>
<span class="gutterH">  10 </span><span class=
"syntax-OPERATOR">]$</span>
</pre>Here the function <code>getMsgQ</code> is defined. The
argument list is not typed in any way. These are merely token names
for whatever will appear in that position inside the parentheses
when the function is invoked. Inside the body of the function these
arguments will be referenced by prefixing them with <code>@@</code>
e.g., <code>@@password</code>.<br>
  <br>
  <strong>Note</strong> that the parentheses are separated from
  both the function name and from the argument list!!<br>
  <br>
  <small><em>In the example, I happened to use the bad style of
  naming arguments the same name as Ublu commands
  (</em><em><code>system</code></em> <em><code>user</code></em>
  <em>and <code>msgq</code>) which, of course, the editor then
  syntax-colored, mistaking them for keywords. This is entirely
  legal in Ublu but, again, it's bad style.<br></em></small><br>
  The function body is the execution block between <code>$[</code>
  and <code>]$</code><br>
  <br>
  On line 7, a local variable is declared. All variables ("tuple
  variables" as they are called, or just "tuples") are identified
  by the <code>@</code> prefix, whether they are <code>LOCAL</code>
  or global (or interpreter-level-local).<br>
  <br>
  Tuple variables come into existence just by being mentioned.
  Arguments to a function may be tuples or plain words, Ublu
  commands typically know what to do with either when passed them
  as arguments.<br>
  <br>
  The LOCAL declaration <code>LOCAL @as400</code> serves to says
  that there will be a local tuple variable which will hide any
  other variables of the same name in the program while in this
  execution block and then disappear at the end of the execution
  block, i.e., at the end of function execution. Equally, the
  variable name <code>@as400</code> could have been used without
  declaration, but then it would persist beyond the end of the
  function, and further, if there happened to already exist such a
  variable in the program, it would be referencing that same
  variable, possibly unintentionally.<br>
  <br>
  Lines 8 and 9 are Ublu commands.<br>
  <br>
  Line 8 says, "Create a remote server instance for the system
  function argument using the user and password function arguments.
  Store that instance in the declared local variable
  <code>@as400</code>".<br>
  <br>
  Line 9 says, "Create an object referencing the message queue on
  the server represented by <code>@as400</code> and identified by
  the IFS path represented by the function argument
  <code>ifspath</code> and store that object to the function
  argument <code>msgq</code> , presumably a variable, with an error
  resulting if a variable was not provided in that position in the
  function argument list."<br>
  <br>
  The variable named which is provided in the function argument
  list in that position does not have to be named anything like the
  declaring argument list named it. It could be called
  <code>@fred</code> for instance. It does not even have to have
  been previously declared. It comes into global existence by being
  named. It can later be deleted via the <code><a href=
  "ubluref.html#tuple">tuple</a> -delete @fred</code> command, if
  so desired. Or, it might be a LOCAL variable from a calling
  function.<br>

  <pre>
<span class="gutter">  13 </span><span class=
"syntax-KEYWORD1">FUNC</span> getReplyMsgs <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-KEYWORD2">msgq</span> replylist <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">  14 </span>    <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-KEYWORD3">--</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-LITERAL4">@@msgq</span> <span class=
"syntax-KEYWORD3">-query</span> <span class=
"syntax-KEYWORD3">-reply</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-LITERAL4">@@replylist</span>
<span class="gutterH">  15 </span><span class=
"syntax-OPERATOR">]$</span>
</pre>These lines declare another function which says, "Given a
message queue instance and a variable name in which to store the
result of this function, create a list of messages needing reply
waiting on the remoted i Series OS message queue represented by the
message queue instance."<br>

  <pre>
<span class="gutter">  18 </span><span class=
"syntax-KEYWORD1">FUNC</span> autoreply <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-KEYWORD2">system</span> <span class=
"syntax-KEYWORD2">user</span> password ifspath <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">  19 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@msgq</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@replylist</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@key</span>
<span class="gutterH">  20 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@answer</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@tf</span> <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@reply</span>
<span class="gutter">  21 </span>    getMsgQ <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-LITERAL4">@@system</span> <span class=
"syntax-LITERAL4">@@user</span> <span class=
"syntax-LITERAL4">@@password</span> <span class=
"syntax-LITERAL4">@@ifspath</span> <span class=
"syntax-MARKUP">@msgq</span> <span class="syntax-OPERATOR">)</span>
<span class="gutter">  22 </span>    getReplyMsgs <span class=
"syntax-OPERATOR">(</span> <span class=
"syntax-MARKUP">@msgq</span> <span class=
"syntax-MARKUP">@replylist</span> <span class=
"syntax-OPERATOR">)</span>
<span class="gutter">  23 </span>    <span class=
"syntax-KEYWORD1">FOR</span> <span class=
"syntax-MARKUP">@msg</span> in <span class=
"syntax-MARKUP">@replylist</span> <span class=
"syntax-OPERATOR">$[</span>
<span class="gutter">  24 </span>        <span class=
"syntax-KEYWORD2">msg</span> <span class=
"syntax-KEYWORD3">--</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-MARKUP">@msg</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@key</span> <span class=
"syntax-KEYWORD3">-key</span>
<span class="gutterH">  25 </span>        <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-from</span> <span class=
"syntax-MARKUP">@msg</span>
<span class="gutter">  26 </span>        <span class=
"syntax-KEYWORD2">ask</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@answer</span> <span class=
"syntax-KEYWORD3">-say</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Do</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">you</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">wish</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">reply</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">this</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">message?</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(y/n)</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutter">  27 </span>        <span class=
"syntax-KEYWORD2">test</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@tf</span> <span class=
"syntax-KEYWORD3">-eq</span> <span class=
"syntax-MARKUP">@answer</span> y
<span class="gutter">  28 </span>        <span class=
"syntax-KEYWORD1">IF</span> <span class=
"syntax-MARKUP">@tf</span> <span class=
"syntax-KEYWORD1">THEN</span> <span class=
"syntax-OPERATOR">$[</span>
<span class="gutter">  29 </span>            <span class=
"syntax-KEYWORD2">ask</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@reply</span> <span class=
"syntax-KEYWORD3">-say</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Please</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">enter</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">your</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">reply</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutterH">  30 </span>            <span class=
"syntax-KEYWORD2">msgq</span> <span class=
"syntax-KEYWORD3">--</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-MARKUP">@msgq</span> <span class=
"syntax-KEYWORD3">-sendreplybinkey</span> <span class=
"syntax-MARKUP">@key</span> <span class=
"syntax-MARKUP">@reply</span>
<span class="gutter">  31 </span>            <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Reply</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">sent.</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutter">  32 </span>        <span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  33 </span>    <span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  34 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutterH">  35 </span>
</pre><br>
  These lines declare <code>autoreply</code> which is the top-level
  function in the file. Note that we declared these functions from
  low-level to top level. This is not necessary, since the
  functions are not interpreted until called, but it's easier to
  understand this way.<br>
  <br>
  <small><em>Ublu function definitions offer almost no compiler
  security. They are simply parsed and stored as execution blocks
  associated with a call specification and no validation of their
  runtime action is performed.</em></small><br>
  <br>
  <code>autoreply</code> takes as its arguments a system name, user
  id, password and IFS path. Arguments to the function, whether
  they are plainwords or variables are referenced inside the
  function by their declared name decorated with <code>@@</code> .
  If a function is declared:<br>

  <blockquote>
    <code>FUNC foo ( bar )</code><br>
  </blockquote>
  then the argument <code>bar</code> is referenced inside the body
  of the function as <code>@@bar</code><br>

  <blockquote>
    <code>FUNC foo ( bar ) $[ put -from @@bar ]$</code><br>
  </blockquote>
  <code>autoreply</code>&nbsp; also declares a few local variables
  that will hide global and more outer local variables of the same
  name and then disappear at the end of the execution block in
  which they are declared.<br>
  <br>
  <code>autoreply</code>&nbsp; calls the function
  <code>getMsgQ</code> to get the message queue instance.<br>
  <br>
  <code>autoreply</code> then calls <code>getReplyMsgs</code> to
  get a list messages awaiting a reply.<br>
  <br>
  <code>autoreply</code> then loops in a <code>FOR</code> loop
  through the list and uses <code>ask</code> command to ask the
  user if the user wishes to reply each individual message. It does
  <code>test</code> on the response against the character
  <code>y</code> and <code>IF</code> the result of that test is
  true, gets a reply via <code>ask</code> and replies to the
  message queue, informing the user via <code>put</code> that the
  reply was sent.<br>

  <h2><a class="mozTocH2" name="mozTocId10736" id=
  "mozTocId10736"></a>Generating launcher scripts for Ublu programs
  via <code>gensh</code></h2>
  The <code>autoreply</code> program would still require
  understanding of Ublu to load and execute, but our help desk
  operator doesn't have to deal with that. As noted above, the Ublu
  <a href="ubluref.html#gensh"><code>gensh</code></a> command can
  generate a shell script so that <code>autoreply</code> can become
  effectively a shell command that takes options to identify system
  and queue. <em><small><big><code>gensh</code></big> shell scripts
  allow the designer to turn Ublu functions into
  closures.</small></em><br>
  <br>
  Here is the <code>gensh</code>-generated&nbsp; shell script to
  run the top-level function <code>autoreply</code> from the
  program <code>autoreply.ublu</code><br>

  <h3><a class="mozTocH3" name="mozTocId850587" id=
  "mozTocId850587"></a><code>examples/autoreply.sh</code>
  </h3>

  <pre>
<span class="syntax0"><span class="gutter">   1 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">autoreply.sh</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">...</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Find</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">reply</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">all</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">*INQ</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&amp;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">*NOTIFY</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">messages</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">in</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">a</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">given</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">MSGQ</span><span class="syntax-COMMENT1"> </span>
<span class="gutter">   2 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">autogenerated</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Wed</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Mar</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">09</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">19:26:19</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">MST</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">2016</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">by</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">jax</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">using</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">command:</span>
<span class="gutter">   3 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">gensh</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">autoreply.sh</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-path</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">/opt/ublu/ublu.jar</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-optr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">s</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">SERVER</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">@server</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Server</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">}$</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-optr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">u</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">USER</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">@user</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">User</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">}$</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-optr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">p</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">PASSWORD</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">@password</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Password</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">}$</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-optr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">q</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">QPATHIFS</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">@qpathifs</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">IFS</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">path</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">message</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">queue,</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">e.g.,</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">/QSYS.LIB/QSYSOPR.MSGQ</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">or</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">/QSYS.LIB/QUSRSYS.LIB/MYUSERID.MSGQ</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">}$</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">${</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">autoreply.sh</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">...</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">Find</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">and</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">reply</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">to</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">all</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">*INQ</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">&amp;</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">*NOTIFY</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">messages</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">in</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">a</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">given</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">MSGQ</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">}$</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">/opt/ublu/examples/autoreply.ublu</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">${</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">autoreply</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">(</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">@server</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">@user</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">@password</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">@qpathifs</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">)</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">}$</span>
<span class="gutter">   4 </span>
<span class="gutterH">   5 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Usage</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">message</span>
<span class="gutter">   6 </span>function usage { 
<span class="gutter">   7 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">autoreply</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">sh</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Find</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">and</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">reply</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">all</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">*</span><span class=
"syntax-LITERAL1">INQ</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">&amp;</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">*</span><span class=
"syntax-LITERAL1">NOTIFY</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">messages</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">in</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">a</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">given</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">MSGQ</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">"</span>
<span class="gutter">   8 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">This</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">shell</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">script</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">was</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">autogenerated</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Wed</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Mar</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">09</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">19</span><span class=
"syntax-LITERAL1">:</span><span class=
"syntax-LITERAL1">26</span><span class=
"syntax-LITERAL1">:</span><span class=
"syntax-LITERAL1">19</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">MST</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">2016</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">by</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">jax</span><span class=
"syntax-LITERAL1">.</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">   9 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Usage</span><span class=
"syntax-LITERAL1">:</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-KEYWORD2">0</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">[</span><span class=
"syntax-LITERAL1">silent</span><span class=
"syntax-LITERAL1">]</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">h</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">s</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">SERVER</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">u</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">USER</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">p</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">PASSWORD</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">q</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">QPATHIFS</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">"</span>
<span class="gutterH">  10 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">  </span><span class=
"syntax-LITERAL1">where</span><span class=
"syntax-LITERAL1">"</span>
<span class="gutter">  11 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">  </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">h</span><span class=
"syntax-LITERAL1">  </span><span class=
"syntax-LITERAL1">    </span><span class=
"syntax-LITERAL1">display</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">this</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">help</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">message</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">and</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">exit</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">0</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  12 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">  </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">s</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">SERVER</span><span class=
"syntax-LITERAL1">   </span><span class=
"syntax-LITERAL1">Server</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(</span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1">)</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  13 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">  </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">u</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">USER</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">User</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(</span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1">)</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  14 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">  </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">p</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">PASSWORD</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">Password</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(</span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1">)</span><span class="syntax-LITERAL1">"</span>
<span class="gutterH">  15 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">  </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">q</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">QPATHIFS</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">IFS</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">path</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">message</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">queue</span><span class=
"syntax-LITERAL1">,</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">e</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">g</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">,</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">/</span><span class=
"syntax-LITERAL1">QSYS</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">LIB</span><span class=
"syntax-LITERAL1">/</span><span class=
"syntax-LITERAL1">QSYSOPR</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">MSGQ</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">or</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">/</span><span class=
"syntax-LITERAL1">QSYS</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">LIB</span><span class=
"syntax-LITERAL1">/</span><span class=
"syntax-LITERAL1">QUSRSYS</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">LIB</span><span class=
"syntax-LITERAL1">/</span><span class=
"syntax-LITERAL1">MYUSERID</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">MSGQ</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(</span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1">)</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  16 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">-</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  17 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">If</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">the</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">keyword</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">'</span><span class=
"syntax-LITERAL1">silent</span><span class=
"syntax-LITERAL1">'</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">appears</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">ahead</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">of</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">all</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">options</span><span class=
"syntax-LITERAL1">,</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">then</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">included</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">files</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">will</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">not</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">echo</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">and</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">prompting</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">suppressed</span><span class=
"syntax-LITERAL1">.</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  18 </span>echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Exit</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">code</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">the</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">result</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">of</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">execution</span><span class=
"syntax-LITERAL1">,</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">or</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">0</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">for</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">h</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">or</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">2</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">if</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">there</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">an</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">error</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">in</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">processing</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">options</span><span class=
"syntax-LITERAL1">"</span>
<span class="gutter">  19 </span>}
<span class="gutterH">  20 </span>
<span class="gutter">  21 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1">Test</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">if</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">user</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">wants</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">silent</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">includes</span>
<span class="gutter">  22 </span><span class=
"syntax-KEYWORD1">if</span> [ <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-KEYWORD2">1</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">=</span><span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">silent</span><span class=
"syntax-LITERAL1">"</span> ]
<span class="gutter">  23 </span><span class=
"syntax-KEYWORD1">then</span>
<span class="gutter">  24 </span>    <span class=
"syntax-KEYWORD2">SILENT</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">silent</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">"</span>
<span class="gutterH">  25 </span>    shift
<span class="gutter">  26 </span><span class=
"syntax-KEYWORD1">else</span>
<span class="gutter">  27 </span>    <span class=
"syntax-KEYWORD2">SILENT</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  28 </span><span class=
"syntax-KEYWORD1">fi</span>
<span class="gutter">  29 </span>
<span class="gutterH">  30 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Process</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">options</span>
<span class="gutter">  31 </span><span class=
"syntax-KEYWORD1">while</span> getopts s:u:p:q:h the_opt
<span class="gutter">  32 </span><span class=
"syntax-KEYWORD1">do</span>
<span class="gutter">  33 </span>    <span class=
"syntax-KEYWORD1">case</span> <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-KEYWORD2">the_opt</span><span class=
"syntax-LITERAL1">"</span> <span class="syntax-KEYWORD1">in</span>
<span class="gutter">  34 </span>        s<span class=
"syntax-OPERATOR">)</span>  <span class=
"syntax-KEYWORD2">SERVER</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-KEYWORD2">OPTARG</span><span class=
"syntax-LITERAL1">"</span><span class="syntax-OPERATOR">;;</span>
<span class="gutterH">  35 </span>        u<span class=
"syntax-OPERATOR">)</span>  <span class=
"syntax-KEYWORD2">USER</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-KEYWORD2">OPTARG</span><span class=
"syntax-LITERAL1">"</span><span class="syntax-OPERATOR">;;</span>
<span class="gutter">  36 </span>        p<span class=
"syntax-OPERATOR">)</span>  <span class=
"syntax-KEYWORD2">PASSWORD</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-KEYWORD2">OPTARG</span><span class=
"syntax-LITERAL1">"</span><span class="syntax-OPERATOR">;;</span>
<span class="gutter">  37 </span>        q<span class=
"syntax-OPERATOR">)</span>  <span class=
"syntax-KEYWORD2">QPATHIFS</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-KEYWORD2">OPTARG</span><span class=
"syntax-LITERAL1">"</span><span class="syntax-OPERATOR">;;</span>
<span class="gutter">  38 </span>        h<span class=
"syntax-OPERATOR">)</span>  usage;exit 0;;
<span class="gutter">  39 </span>        [?]<span class=
"syntax-OPERATOR">)</span>    usage;exit 2;;
<span class="gutterH">  40 </span>
<span class="gutter">  41 </span>    <span class=
"syntax-KEYWORD1">esac</span>
<span class="gutter">  42 </span><span class=
"syntax-KEYWORD1">done</span>
<span class="gutter">  43 </span>shift <span class=
"syntax-KEYWORD3">`</span><span class=
"syntax-KEYWORD3">expr</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">OPTIND</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-KEYWORD3">-</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-KEYWORD3">1</span><span class="syntax-KEYWORD3">`</span>
<span class="gutter">  44 </span><span class=
"syntax-KEYWORD1">if</span> [ <span class=
"syntax-KEYWORD2">$#</span> -ne <span class=
"syntax-DIGIT">0</span> ]
<span class="gutterH">  45 </span><span class=
"syntax-KEYWORD1">then</span>
<span class="gutter">  46 </span>    echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Superfluous</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">argument</span><span class=
"syntax-LITERAL1">(</span><span class=
"syntax-LITERAL1">s</span><span class=
"syntax-LITERAL1">)</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-LITERAL1">*</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  47 </span>    usage
<span class="gutter">  48 </span>    exit <span class=
"syntax-DIGIT">2</span>
<span class="gutter">  49 </span><span class=
"syntax-KEYWORD1">fi</span>
<span class="gutterH">  50 </span>
<span class="gutter">  51 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Translate</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">options</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">tuple</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">assignments</span>
<span class="gutter">  52 </span><span class=
"syntax-KEYWORD1">if</span> [ <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">SERVER</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">!</span><span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-LITERAL1">"</span><span class="syntax-LITERAL1">"</span> ]
<span class="gutter">  53 </span><span class=
"syntax-KEYWORD1">then</span>
<span class="gutter">  54 </span>    <span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">string</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">@</span><span class=
"syntax-LITERAL1">server</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">trim</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">\$</span><span class=
"syntax-LITERAL1">{</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">SERVER</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">}</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">"</span>
<span class="gutterH">  55 </span><span class=
"syntax-KEYWORD1">else</span>
<span class="gutter">  56 </span>    echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">s</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">SERVER</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">a</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">but</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">not</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">present</span><span class=
"syntax-LITERAL1">.</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  57 </span>    usage
<span class="gutter">  58 </span>    exit <span class=
"syntax-DIGIT">2</span>
<span class="gutter">  59 </span><span class=
"syntax-KEYWORD1">fi</span>
<span class="gutterH">  60 </span><span class=
"syntax-KEYWORD1">if</span> [ <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">USER</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">!</span><span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-LITERAL1">"</span><span class="syntax-LITERAL1">"</span> ]
<span class="gutter">  61 </span><span class=
"syntax-KEYWORD1">then</span>
<span class="gutter">  62 </span>    <span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">string</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">@</span><span class=
"syntax-LITERAL1">user</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">trim</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">\$</span><span class=
"syntax-LITERAL1">{</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">USER</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">}</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  63 </span><span class=
"syntax-KEYWORD1">else</span>
<span class="gutter">  64 </span>    echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">u</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">USER</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">a</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">but</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">not</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">present</span><span class=
"syntax-LITERAL1">.</span><span class="syntax-LITERAL1">"</span>
<span class="gutterH">  65 </span>    usage
<span class="gutter">  66 </span>    exit <span class=
"syntax-DIGIT">2</span>
<span class="gutter">  67 </span><span class=
"syntax-KEYWORD1">fi</span>
<span class="gutter">  68 </span><span class=
"syntax-KEYWORD1">if</span> [ <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">PASSWORD</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">!</span><span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-LITERAL1">"</span><span class="syntax-LITERAL1">"</span> ]
<span class="gutter">  69 </span><span class=
"syntax-KEYWORD1">then</span>
<span class="gutterH">  70 </span>    <span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">string</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">@</span><span class=
"syntax-LITERAL1">password</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">trim</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">\$</span><span class=
"syntax-LITERAL1">{</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">PASSWORD</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">}</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  71 </span><span class=
"syntax-KEYWORD1">else</span>
<span class="gutter">  72 </span>    echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">p</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">PASSWORD</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">a</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">but</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">not</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">present</span><span class=
"syntax-LITERAL1">.</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  73 </span>    usage
<span class="gutter">  74 </span>    exit <span class=
"syntax-DIGIT">2</span>
<span class="gutterH">  75 </span><span class=
"syntax-KEYWORD1">fi</span>
<span class="gutter">  76 </span><span class=
"syntax-KEYWORD1">if</span> [ <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">QPATHIFS</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">!</span><span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-LITERAL1">"</span><span class="syntax-LITERAL1">"</span> ]
<span class="gutter">  77 </span><span class=
"syntax-KEYWORD1">then</span>
<span class="gutter">  78 </span>    <span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">gensh_runtime_opts</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">string</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">@</span><span class=
"syntax-LITERAL1">qpathifs</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">trim</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">\$</span><span class=
"syntax-LITERAL1">{</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">QPATHIFS</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">}</span><span class=
"syntax-KEYWORD2">$</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  79 </span><span class=
"syntax-KEYWORD1">else</span>
<span class="gutterH">  80 </span>    echo <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">q</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">QPATHIFS</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">a</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">required</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">option</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">but</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">is</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">not</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">present</span><span class=
"syntax-LITERAL1">.</span><span class="syntax-LITERAL1">"</span>
<span class="gutter">  81 </span>    usage
<span class="gutter">  82 </span>    exit <span class=
"syntax-DIGIT">2</span>
<span class="gutter">  83 </span><span class=
"syntax-KEYWORD1">fi</span>
<span class="gutter">  84 </span>
<span class="gutterH">  85 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Invocation</span>
<span class=
"gutter">  86 </span>java -jar /opt/ublu/ublu.jar <span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-LITERAL1">gensh_runtime_opts</span><span class=
"syntax-KEYWORD2">}</span> include <span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-LITERAL1">SILENT</span><span class=
"syntax-KEYWORD2">}</span>/opt/ublu/examples/autoreply.ublu autoreply \<span class="syntax-OPERATOR">(</span> @server @user @password @qpathifs \<span class="syntax-OPERATOR">)</span> 
<span class="gutter">  87 </span>exit <span class=
"syntax-KEYWORD2">$?</span>
<span class="gutter">  88 </span>
</span>
</pre>
  <h2><a class="mozTocH2" name="mozTocId625051" id=
  "mozTocId625051"></a> Some Obvious Questions about Ublu</h2>
  The above explanations raise several new questions:
  <ul>
    <li>What are the data types in Ublu?</li>

    <li>What are those dash thingies after Ublu commands?</li>

    <li>What is a <code>put</code> ?</li>

    <li>How are arguments passed?</li>
  </ul>

  <p>We'll answer those questions next.<br></p>

  <h3><a class="mozTocH2" name="mozTocId772969" id=
  "mozTocId772969"></a>What are the data types in Ublu?</h3>

  <p>Ublu can be described as an "object-disoriented
  language".<br></p>

  <p>Ublu is a form of interpretive Java that hides as much as
  possible about object usage.<br></p>
  There are basically five (5) data types in the Ublu language:<br>

  <ol>
    <li>plainword</li>

    <li>object</li>

    <li>variable</li>

    <li>string</li>

    <li>execution block<br></li>
  </ol>

  <p>A <strong>plainword</strong> is a single whitespace-delimited
  lex<br></p>

  <ul>
    <li><code>arthur</code>
    </li>

    <li><code>99999</code>
    </li>

    <li><code>supercalifra$gilist$ticexpialifoobar..**(())</code>
    </li>
  </ul>

  <p>An <strong>object</strong> represents something or other,
  often a something-or-other on a remote server but it's pretty
  opaque. You generally know which objects you have in hand go with
  which Ublu commands. It's simple because the same commands that
  use the objects provide the objects in the first place.</p>

  <p>Objects are passed around in <strong>variables</strong>
  ("tuple variables" or "tuples") marked with the <code>@</code>
  sign. Variables come into existence by being mentioned. If
  they're in an execution block between <code>$[</code> and
  <code>]$</code> they can be marked <code>LOCAL</code> and
  disappear at the end of the block. Otherwise, they persist until
  expressly deleted or until the interpreter in whose context they
  reside exits.</p>

  <p>A <strong>string</strong> in Ublu is parsed from a sequence of
  plainwords wrapped by <code>${</code> and <code>}$</code> e.g.
  <code>${ hi there }$</code> Many commands in Ublu will take
  either a string, a plainword, or a variable as an argument. This
  is symbolized in the command descriptions in the Ublu Reference
  by <code>~@{something}</code>. <small><em>The ~ means also that
  the argument to the dash-command can be popped from Ublu's LIFO
  stack.<br></em></small></p>

  <p>An <strong>execution block</strong> is a body of Ublu program
  text wrapped in <code>$[</code> and <code>]$</code> . Execution
  blocks are used as the body of control constructs, such as
  <code>IF</code> ... <code>THEN</code> ... <code>ELSE</code> ,
  function definitions and <code>TRY</code> ... <code>CATCH</code>
  , e.g.</p>

  <blockquote>
    <code>IF @trueorfalse THEN $[ joblist -as400 @myserver -to @jl
    ]$</code><br>
  </blockquote>

  <h3><a class="mozTocH2" name="mozTocId379708" id=
  "mozTocId379708"></a>What are those dash thingies after Ublu
  commands?</h3>
  The dash-commands after Ublu commands pass arguments to the
  command, often objects being kept in variables.
  <blockquote>
    <p><code>as400 -to @myServer somehostname.com someuserid
    somepassword</code><code><br></code><code>joblist -as400
    @myServer</code><br>
    </p>
  </blockquote>
  would retrieve a joblist from <code>somehostname.com</code>
  provided <code>someuserid</code> had authorization to request
  it.<br>
  <br>
  One special dash-command is double-dash <code>--</code> the
  "eponymous dash-command" which represents an object identified in
  the command description with same name as the command itself. For
  example, the <code>as400</code> command instances and operates on
  objects representing a connection to a remote i Series OS server.
  Once you have instanced such an object and stored it <code>-to
  @someServer</code> you can use it and then later test if it is
  still connected by passing the same variable back to the
  <code>as400</code> command like this:<br>

  <blockquote>
    <code>as400 -as400 @someServer -connected</code><br>
  </blockquote>
  which will <code>put</code> either <code>true</code> or
  <code>false</code>. But you could also have simply used the
  eponymous dash-command:<br>

  <blockquote>
    <code>as400 -- @someServer -connected</code><br>
  </blockquote>
  since, for the as400 command, <code>--</code> represents
  <code>-as400</code>.<br>

  <h3><a class="mozTocH2" name="mozTocId58628" id=
  "mozTocId58628"></a>What is a <code>put</code> ?</h3>
  &nbsp;The <code>as400</code> command stored <code>-to
  @myServer</code> which variable was then passed to joblist
  command as <code>-as400 @myServer<br></code>
  <p><code>-to</code> is a dash-command to almost every Ublu
  command. It says where the <code>put</code> is to go.<br></p>

  <p>Most Ublu commands <code>put</code> a result. That result
  could be text or an object. If no <code>-to</code> destination is
  specified, then the <code>put</code> goes to standard out. If the
  result is an object and the <code>put</code> is to standard
  out,&nbsp; the object is rendered in text. Ublu knows how to
  render objects in text in a useful fashion.<br></p>

  <p>The full discussion of <code>put</code> requires an
  understanding of <a href="ubluref.html#Datasinks">Data Sinks</a>
  discussed in the Ublu Reference.<br></p>

  <h3><a name="tuple-assign" id="tuple-assign"></a><code>tuple
  -assign</code> instead of <code>put</code></h3>

  <p>Once an object is assigned to a tuple variable,
  <code>put</code> tends to have the sometimes-undesirable effect
  of turning the value it puts into a string.</p>

  <p>To assign an object from one tuple or another (including from
  the tuple stack), use <code><a href="./ubluref.html#tuple">tuple
  -assign</a></code> <em>@destination-tuple
  ~@value-source</em>.</p>

  <h3><a class="mozTocH2" name="mozTocId56861" id=
  "mozTocId56861"></a>How are arguments passed?</h3>

  <p>Arguments in Ublu are passed by reference, not of by
  value.<br></p>

  <p>When you pass a variable as an argument to a command or
  function, that variable is accessible to the function and any
  changes the function makes to that argument are changes to the
  variable itself.<br></p>

  <p>Arguments in function argument lists are actually <a href=
  "./ubluref.html#Function_Parameter_Binding">token-pasted</a> into
  the execution block which is the body of the function.</p>

  <p>Token pasting in function argument marshalling allows some
  unusual programming techniques as we'll see later, e.g., in the
  section on the <a href="#TupleStack">Tuple Stack</a>.</p>

  <h4><a class="mozTocH4" name="mozTocId154189" id=
  "mozTocId154189"></a>Local variables as arguments</h4>

  <p>Local variables only are accessible within the execution block
  in which they are declared. This encompassed nested blocks within
  the declaring block (unless a local of the same name is declared
  in the inner block, thus hiding the outer block's local).<br></p>

  <p>This means you can pass a local as a positional argument to a
  function called within a block and that function can reference
  the provided value normally.<br></p>

  <blockquote>
    <p><code>FUNC bar ( myarg ) $[ put -from @@myarg
    ]$</code><code><br></code><code>FUNC foo ( ) $[ LOCAL @a put
    -to @a 17 bar ( @a ) ]$</code><br>
    </p>
  </blockquote>

  <p><code>foo ( )</code> when invoked will display the number
  17.<br></p>

  <h5><a class="mozTocH5" name="mozTocId856951" id=
  "mozTocId856951"></a><big>A limit on local variables as
  arguments</big>
  </h5>

  <p>Because calls are by reference and locals have only block
  scope, there exist cases where it appears you can pass a local to
  a function but you really cannot. Here's an instance of that:</p>

  <h6><a class="mozTocH6" name="mozTocId334710" id=
  "mozTocId334710"></a><big><big><big><code>examples/test/localvarthread.ublu</code></big></big></big>
  </h6>

  <pre>
<span class="syntax0"><span class="gutter">   1 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Test</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">background</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">threading</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">with</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">local</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">vars</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">global</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">vars.</span>
<span class="gutter">   2 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Example</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">from</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Ublu</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">https://github.com/jwoehr/ublu</span>
<span class="gutter">   3 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Copyright</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">(C)</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">2016</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Jack</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">J.</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Woehr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">http://www.softwoehr.com</span>
<span class="gutter">   4 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">See</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Ublu</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">license</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">(BSD-2</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">open</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">source)</span>
<span class="gutterH">   5 </span>
<span class="gutter">   6 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">A</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">simple</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">function</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">run</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">in</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">a</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">thread</span>
<span class="gutter">   7 </span><span class=
"syntax-KEYWORD1">FUNC</span> localVarThread <span class=
"syntax-OPERATOR">(</span> var <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">   8 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@myvar</span> 
<span class="gutter">   9 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@start</span> 
<span class="gutterH">  10 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@end</span> 
<span class="gutter">  11 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-from</span> <span class=
"syntax-LITERAL4">@@var</span> 
<span class="gutter">  12 </span>    <span class=
"syntax-KEYWORD2">eval</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@myvar</span> + <span class=
"syntax-DIGIT">1</span> <span class="syntax-LITERAL4">@@var</span>
<span class="gutter">  13 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@start</span> <span class="syntax-DIGIT">1</span>
<span class="gutter">  14 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@end</span> <span class="syntax-DIGIT">9</span> 
<span class="gutterH">  15 </span>    <span class=
"syntax-KEYWORD1">DO</span> <span class=
"syntax-MARKUP">@start</span> <span class=
"syntax-MARKUP">@end</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">  16 </span>        <span class=
"syntax-KEYWORD2">eval</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@myvar</span> + <span class=
"syntax-MARKUP">@myvar</span> <span class=
"syntax-DIGIT">1</span> <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-from</span> <span class=
"syntax-MARKUP">@myvar</span>  <span class=
"syntax-KEYWORD2">system</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">sleep</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">10</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutter">  17 </span>    <span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  18 </span>    <span class=
"syntax-KEYWORD2">put</span> done!
<span class="gutter">  19 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutterH">  20 </span>
<span class="gutter">  21 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Doesn't</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">work</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">with</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">locals.</span>
<span class="gutter">  22 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Locals</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">in</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">calling</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">function</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">don't</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">exist</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">in</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">context</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">of</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">created</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">thread.</span>
<span class="gutter">  23 </span><span class=
"syntax-KEYWORD1">FUNC</span> runItLocal <span class=
"syntax-OPERATOR">(</span> number <span class=
"syntax-OPERATOR">)</span> <span class=
"syntax-OPERATOR">$[</span>    
<span class="gutter">  24 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@x</span>
<span class="gutterH">  25 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@x</span> <span class="syntax-DIGIT">100000</span>
<span class="gutter">  26 </span>    <span class=
"syntax-KEYWORD2">eval</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@x</span> + <span class=
"syntax-LITERAL4">@@number</span> <span class=
"syntax-DIGIT">7</span>
<span class="gutter">  27 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@p</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">localVarThread</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">@x</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">)</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutter">  28 </span>    <span class=
"syntax-KEYWORD2">thread</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@t</span> <span class=
"syntax-KEYWORD3">-from</span> <span class=
"syntax-MARKUP">@p</span>
<span class="gutter">  29 </span>    <span class=
"syntax-KEYWORD2">thread</span> <span class=
"syntax-KEYWORD3">-thread</span> <span class=
"syntax-MARKUP">@t</span> <span class=
"syntax-KEYWORD3">-start</span>
<span class="gutterH">  30 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">  31 </span>
<span class="gutter">  32 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">This</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">works,</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">uses</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">a</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">global</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">variable</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span>
<span class="gutter">  33 </span><span class=
"syntax-KEYWORD1">FUNC</span> runIt <span class=
"syntax-OPERATOR">(</span> number <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">  34 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@x</span> <span class="syntax-DIGIT">100000</span>
<span class="gutterH">  35 </span>    <span class=
"syntax-KEYWORD2">eval</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@x</span> + <span class=
"syntax-LITERAL4">@@number</span> <span class=
"syntax-DIGIT">7</span>
<span class="gutter">  36 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@p</span> <span class=
"syntax-LITERAL1">${</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">localVarThread</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">(</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">@x</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">)</span><span class=
"syntax-LITERAL1"> </span><span class="syntax-LITERAL1">}$</span>
<span class="gutter">  37 </span>    <span class=
"syntax-KEYWORD2">thread</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@t</span> <span class=
"syntax-KEYWORD3">-from</span> <span class=
"syntax-MARKUP">@p</span>
<span class="gutter">  38 </span>    <span class=
"syntax-KEYWORD2">thread</span> <span class=
"syntax-KEYWORD3">-thread</span> <span class=
"syntax-MARKUP">@t</span> <span class=
"syntax-KEYWORD3">-start</span>
<span class="gutter">  39 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutterH">  40 </span>
</span>
</pre>In the above example, a thread is launched with a string
argument, effectively an execution block although passed as a
string in a variable. Even though the thread is launched in the
same execution block as the local variable declaration, the
thread's runtime environment is not nested within the execution
block, so a local variable cannot be passed to the thread.<br>

  <h2><a class="mozTocH2" name="mozTocId241059" id=
  "mozTocId241059"></a>The <code>examples</code> directory</h2>
  Ublu is distributed with an <code>examples</code> directory. Most
  of these are code actually used in production, though of course
  <strong>there is NO WARRANTY OR GUARANTY of correctness or
  fitness for a given application (see the LICENSE)</strong>.<br>
  <br>
  Example files consist of definitions of functions embodying
  factors of common operations, and of the shell scripts generated
  by <code>gensh</code> used to launch the functions.&nbsp; Not all
  examples are pristine examples of Ublu coding style, which is
  evolving. Generally, the more parameterization, the better.<br>

  <h3><a class="mozTocH3" name="mozTocId992046" id=
  "mozTocId992046"></a>The Test Suite</h3>

  <p>Under the <code>examples</code> directory is the
  <code>test</code> directory which contains individual routines
  used by the evolving Ublu test suite.</p>

  <p>The test suite itself resides in
  <code>examples/test/suite</code>.
  <code>examples/test/suite/test.all.sh</code> is the shell script
  test suite launcher generated by Ublu's <a href=
  "./ubluref.html#gensh" target="_top"><code>gensh</code></a>
  command. It invokes Ublu on
  <code>examples/test/suite/test.all.ublu</code> with
  arguments.</p>

  <pre>
<code>$ ./test.all.sh -h
test.all.sh ... run test suite from test suite directory 
This shell script was autogenerated Wed Aug 09 04:47:03 MDT 2017 by jax.
Usage: ./test.all.sh [silent] [-h] [-X...] [-Dprop=val] -d DEFAULTS -w WORKDIR -i IFSPATH -c DESCRIPTION [-k DELWORK]
        where
        -h              display this help message and exit 0
        -X xOpt         pass a -X option to the JVM (can be used many times)
        -D some.property="some value"   pass a property to the JVM (can be used many times)
        -d DEFAULTS     full path to defaults file  (required option)
        -w WORKDIR      Work directory for test  (required option)
        -i IFSPATH      IFS path to test report physical file to be created  (required option)
        -c DESCRIPTION  description for test run pf created  (required option)
        -k DELWORK      delete all files in work dir if value is Y 
</code>
</pre>
  <p><code>test.all.ublu</code> expects that certain Ublu variables
  and constants be set before it runs. The required <code>-d</code>
  option to <code>test.all.sh</code> points to a defaults file
  which contains these values in Ublu syntax.
  <code>examples/test/suite/test.defaults.example.ublu</code> is a
  sample test suite defaults file. Copy this file anywhere and edit
  it to supply valid defaults.</p>

  <p><code>examples/test/suite/sample.test.driver.sh</code> is a
  sample test driver script to invoke <code>test.all.sh</code>. It
  is convenient to use such a driver script if you will be invoking
  the test suite multiple times. Let's examine that script to see
  what the test suite requires.</p>

  <pre><span class="syntax0"><span class=
  "gutter">   1 </span><span class=
  "syntax-COMMENT1">#</span><span class=
  "syntax-COMMENT1"> </span><span class=
  "syntax-COMMENT1">Sample</span><span class=
  "syntax-COMMENT1"> </span><span class=
  "syntax-COMMENT1">test</span><span class=
  "syntax-COMMENT1"> </span><span class=
  "syntax-COMMENT1">driver</span>
<span class="gutter">   2 </span><span class=
"syntax-KEYWORD2">RUNNAME</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-KEYWORD2">$</span><span class="syntax-KEYWORD2">1</span>
<span class="gutter">   3 </span><span class=
"syntax-KEYWORD2">COMMENT</span><span class=
"syntax-OPERATOR">=</span><span class=
"syntax-KEYWORD2">$</span><span class="syntax-KEYWORD2">2</span>
<span class=
"gutter">   4 </span>/opt/ublu/examples/test/suite/test.all.sh silent \
<span class="gutterH">   5 </span>-Djavax.net.ssl.<span class=
"syntax-KEYWORD2">trustStore</span><span class=
"syntax-OPERATOR">=</span>/opt/ublu/keystores/ublutruststore \
<span class="gutter">   6 </span>-Djavax.net.ssl.<span class=
"syntax-KEYWORD2">keyStore</span><span class=
"syntax-OPERATOR">=</span>/opt/ublu/keystore/ubluserverstore \
<span class="gutter">   7 </span>-Djavax.net.ssl.<span class=
"syntax-KEYWORD2">keyStorePassword</span><span class=
"syntax-OPERATOR">=</span>xxxxxxxx \
<span class=
"gutter">   8 </span>-d ~/work/Ublu/Testing/test.defaults.myibmi.ublu \
<span class="gutter">   9 </span>-w ~/work/Ublu/Testing/workdir \
<span class="gutterH">  10 </span>-k Y \
<span class=
"gutter">  11 </span>-i /QSYS.LIB/UBLUTEST.LIB/<span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-LITERAL1">RUNNAME</span><span class=
"syntax-KEYWORD2">}</span>.FILE \
<span class="gutter">  12 </span>-c <span class=
"syntax-LITERAL1">&quot;</span><span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-KEYWORD2">COMMENT</span><span class=
"syntax-KEYWORD2">}</span><span class=
"syntax-LITERAL1">&quot;</span> \
<span class="gutter">  13 </span><span class=
"syntax-DIGIT">2</span><span class=
"syntax-OPERATOR">&gt;</span><span class=
"syntax-OPERATOR">&amp;</span><span class=
"syntax-DIGIT">1</span> <span class=
"syntax-OPERATOR">|</span> tee <span class=
"syntax-KEYWORD2">${</span><span class=
"syntax-LITERAL1">RUNNAME</span><span class=
"syntax-KEYWORD2">}</span>.txt
</span></pre><code>sample.test.driver.sh</code> takes 2 arguments:
  <ol>
    <li><code>RUNNAME</code> is the name of the test run. This name
    will be used as an IBM i PF file name, so it must follow the
    rules of PF file naming. I use Tyyyymmddn for year/month/day
    and run number.</li>

    <li><code>COMMENT</code> is whatever comment about the test you
    wish to make. It will be used as the description for the IBM i
    PF file named by <code>RUNNAME</code> so keep it short.</li>
  </ol>
  Line 4 of the script invokes <code>test.all.sh</code> with
  several arguments:
  <ul>
    <li><code>silent</code> means "don't show me the Ublu code as
    you load it" ... there's a lot of it!</li>

    <li>
      <code>-Djavax.net.ssl.trustStore=/opt/ublu/keystores/ublutruststore</code>
      points to a keystore you created to hold any self-signed SSL
      certificates (common on IBM i installations). You create this
      keystore as follows:
      <ol>
        <li>Copy your Java installation's <code>cacerts</code> file
        somewhere (for the script above, I created it as
        <code>/opt/ublu/keystores/ublutruststore</code>).</li>

        <li>Save your IBM i's self-signed cert, e.g., <code>openssl
        s_client myibmi.mycorp.com:992</code> and cut-and-paste
        from the BEGIN line to the END line inclusive to a file
        such as <code>myibmi.crt</code>.</li>

        <li>In the directory where you created
        <code>ublutruststore</code>, add the cert to the copied
        keystore, e.g., <code>keytool -keystore ublutruststore
        -importcert -alias opensrc -file myibmi.crt</code></li>
      </ol>
    </li>

    <li>
    <code>-Djavax.net.ssl.keyStore=/opt/ublu/keystore/ubluserverstore
    \</code> points to a keystore identifying yourself for those
    parts of the test suite that require you to provied a client
    certificate. You create by using <code>keytool</code> to create
    a keystore that only contains your own (possibly self-signed)
    client certificate(s).</li>

    <li><code>-Djavax.net.ssl.keyStorePassword=xxxxxxxx \</code> is
    the password to your certificate stores.</li>

    <li><code>-d ~/work/Ublu/Testing/test.defaults.myibmi.ublu
    \</code> points to the defaults file we discussed above.</li>

    <li><code>-w ~/work/Ublu/Testing/workdir \</code> points to the
    working directory on your local disk for the test suite to
    write files.</li>

    <li><code>-k Y \</code> tells the test suite to clear out all
    the files in the working directory before starting the test
    run.</li>

    <li><code>-i /QSYS.LIB/UBLUTEST.LIB/${RUNNAME}.FILE \</code>
    passed the <code>RUNNAME</code> you chose to PF creation.</li>

    <li><code>-c "${COMMENT}" \</code> adds the comment you
    chose.</li>

    <li><code>2&gt;&amp;1 | tee ${RUNNAME}.txt</code> causes all
    the output from the test run to be output to a file in the
    current directory named after the <code>RUNNAME</code>.</li>
  </ul>

  <h2><a class="extensions" name="extensions" id=
  "extensions"></a>The <code>extensions</code> directory</h2>

  <p>Ublu is distributed with an <code>extensions</code> directory
  which contains extensions to the base Ublu system which are
  written in Ublu itself.</p>

  <p>As the IBM i system upon which Ublu primarily operates is so
  feature-rich, it is impractical to put every useful utility in
  the base system. Therefore, as Ublu evolves, more and more
  features will likely be relegated to the <code>extensions</code>
  directory to be loaded via <a href=
  "./ubluref.html#include"><code>include</code></a> as needed by
  the application programmer.</p>

  <p>Again, <strong>there is NO WARRANTY OR GUARANTY of correctness
  or fitness for a given application (see the
  LICENSE)</strong>.</p>

  <h2><a class="mozTocH2" name="mozTocId163217" id=
  "mozTocId163217"></a>Object-disoriented</h2>
  A few words about "object-disoriented". Object languages
  associate methods with specific data structures and define these
  relationships in classes. Ublu began as a collection of
  single-purpose utilities designed procedurally and then grew into
  a language when it became necessary to pass objects from utility
  to utility in order to get more useful work done.<br>
  <br>
  You have seen how Ublu works and <a href="#mozTocId58628">read
  about the <code>put</code> command</a>. The <code>put</code>
  command was the beginning of Ublu "object-disorientation". When
  Ublu emerged from the need to pass objects rather than string
  values from one utility to the next, the <code>put</code> command
  was an immediate result of that change to an interpretive
  language. I needed to see quickly what was going on.<br>
  <br>
  A lot of effort went into <code>put</code> so it would give
  useful insight into anything passed around from command to
  command in Ublu without demanding that the programmer remember
  what was where. It is always safe to simply <code>put @foo</code>
  because a useful string representation is returned. And <code>put
  -to @bar @foo</code> put whatever is in <code>@foo</code> also
  into <code>@bar</code> without worrying about object class.<br>
  <br>
  What Ublu's language structure comes down to is that:<br>

  <ul>
    <li>commands are effectively <em>classes</em></li>

    <li>dash-commands are effectively <em>methods</em></li>

    <li>the object values passed in tuple vars to the commands are
    the <em>object instances</em> multiply inheriting from the <em>
      classes</em>.
      <ul>
        <li>Multiple inheritance because the <em>object
        instances</em> respond to the <em>methods</em> of many
        <em>classes</em><br></li>
      </ul>
    </li>
  </ul>

  <p>E.g, in the example ...<br></p>

  <blockquote>
    <code>as400 -to @sys mysys myuid
    mypwd</code><code><br></code><code>as400 -- @sys -alivesvc
    CENTRAL</code><code><br></code><em><code>true</code><br></em>
  </blockquote>
  ... effectively, an Ublu <code>as400</code> <em>class</em>
  creates an <em>object instance</em> stored in <code>@sys</code>.
  That object has a method <em>alivesvc(CENTRAL)</em> invoked on
  it.<br>
  <br>

  <p>Ublu's default "object-disoriented" syntax is wordier than a
  true object language, in that the class is named each time (the
  "command"), but it tends to be easy to use interpretively. It's
  clunky, yet it is reminiscent of traditional "big iron"-style
  command syntax and is pretty easy to remember.</p>

  <h3><a name="Autonomes" id="Autonomes">Autonomes</a> offer easier
  syntax</h3>

  <p><a href=
  "./ubluref.html#Autonomic_Tuple_Variables">Autonomes</a> simplify
  Ublu syntax. An <em>autonome</em> is a tuple variable whose value
  is of one of many recognized types allowed by Ublu to stand for
  its most typical command and the <a href=
  "./ubluref.html#Eponymous_dash-command__--_">eponymous
  dash-command</a>.</p>

  <p>Thus, assuming that <code>@job</code> contains a valid
  instance created by the <a href=
  "./ubluref.html#job"><code>job</code> command</a>,</p>

  <blockquote>
    <code>job -- @job -info</code>
  </blockquote>
  can be expressed
  <blockquote>
    <code>@job -info</code>
  </blockquote>

  <p>And in</p>

  <blockquote>
    <code>user -to @someuser -as400 @myserver FRED</code><br>
    <code>@someuser -enable</code>
  </blockquote>
  the phrase
  <blockquote>
    <code>@someuser -enable</code>
  </blockquote>
  will enable <code>FRED</code>'s account precisely the same as
  <blockquote>
    <code>user -- @someuser -enable</code>
  </blockquote>
  "Precisely" because, in fact, autonomism is effected by editing
  in place the input stream.
  <h2><a class="mozTocH2" name="TupleStack" id="TupleStack"></a>The
  Tuple Stack</h2>
  The <a href=
  "https://en.wikipedia.org/wiki/Forth_(programming_language)"
  target="_blank">Forth programming language</a> taught me the use
  of a LIFO stack in programming. The Ublu <a href=
  "./ubluref.html#Tuple_stack">Tuple stack</a> allows some
  interesting programming metaphors that allow coding functions
  that get around some of the clunkiness of basic Ublu syntax.
  Instead of stowing results in tuple variables, functions can push
  their results to the stack to be popped as arguments by the next
  function. Additionally, the <a href=
  "./ubluref.html#Function_Parameter_Binding">token-pasting</a>
  nature of Ublu <a href=
  "./ubluref.html#FUNC"><code>FUNC</code></a> arguments allow even
  dash-commands to be presented to an Ublu command via the argument
  list to a function.<br>
  <br>
  Here is an example (<code>examples/stringpush.ublu</code>) of
  this object-disoriented slackomorphic style of programming:<br>

  <pre>
<span class="syntax0"><span class="gutter"> 1 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">stringpush.ublu</span>
<span class="gutter"> 2 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Example</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">from</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Ublu</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Midrange</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Mainframe</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Life</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Cycle</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Extension</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">language</span>
<span class="gutter"> 3 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">https://github.com/jwoehr/ublu</span>
<span class="gutter"> 4 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Copyright</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">(C)</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">2016</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Jack</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">J.</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Woehr</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">http://www.softwoehr.com</span>
<span class="gutterH"> 5 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">See</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Ublu</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">license</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">(BSD-2</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">open</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">source)</span>
<span class="gutter"> 6 </span>
<span class="gutter"> 7 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Execute</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">string</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">command</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">providing</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">op</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">2</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arguments</span>
<span class="gutter"> 8 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">push</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">result</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">tuple</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">LIFO</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">stack</span>
<span class="gutter"> 9 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Example:</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">$-2</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">(</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-cat</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">)</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">will</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">pop</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">tuple</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">stack</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">twice,</span>
<span class="gutterH">10 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">concatenate</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">two</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">string</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">values</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">and</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">push</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">result</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">back.</span>
<span class="gutter">11 </span><span class=
"syntax-KEYWORD1">FUNC</span> $<span class=
"syntax-LITERAL4">~</span><span class=
"syntax-DIGIT">2</span> <span class=
"syntax-OPERATOR">(</span> op a b <span class=
"syntax-OPERATOR">)</span> <span class=
"syntax-OPERATOR">$[</span> <span class=
"syntax-KEYWORD2">string</span> <span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-LITERAL4">~</span> <span class=
"syntax-LITERAL4">@@op</span> <span class=
"syntax-LITERAL4">@@a</span> <span class=
"syntax-LITERAL4">@@b</span> <span class=
"syntax-OPERATOR">]$</span>
<span class="gutter">12 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Here's</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">an</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">example</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">session:</span>
<span class="gutter">13 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">put</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">}$</span>
<span class="gutter">14 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">put</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">foo</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">bar</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">woof</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">}$</span>
<span class="gutterH">15 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">$~2</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">(</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-cat</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">)</span>
<span class="gutter">16 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">put</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">~</span>
<span class="gutter">17 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">foo</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">bar</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">woof</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">arf</span>
<span class="gutter">18 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">...</span>
<span class="gutter">19 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">Note</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">that</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">"the</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">first</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">shall</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">be</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">last".</span>
<span class="gutterH">20 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">...</span>
<span class="gutter">21 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">put</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">}$</span>
<span class="gutter">22 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">put</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-to</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">${</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">arf</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">}$</span>
<span class="gutter">23 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">$~2</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">(</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">-eq</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">~</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">)</span>
<span class="gutter">24 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">&gt;</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">put</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">~</span>
<span class="gutterH">25 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">true</span>
<span class="gutter">26 </span>
<span class="gutter">27 </span><span class=
"syntax-COMMENT1">#</span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">end</span>
<span class="gutter">28 </span>
</span>
</pre>
  <h3><a name="TupleStackPopFuncArgs" id=
  "TupleStackPopFuncArgs">Tuple Stack Pop in Function Arguments</a>
  </h3>

  <p>Using the <code>~</code> symbol for a tuple stack pop as an
  argument to a function can lead to unexpected results.</p>

  <p>Function arguments are passed by token pasting as discussed
  above (<a href="mozTocId56861"></a>How are arguments passed?). So
  when a function body references the argument, it sees precisely
  what you provided as the runtime argument. Ergo, in an example
  like:</p>

  <pre>
<span class="syntax0"><span class="gutter">   1 </span><span class=
"syntax-KEYWORD1">FUNC</span> foo <span class=
"syntax-OPERATOR">(</span> bar <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">   2 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-LITERAL4">@@bar</span>
<span class="gutter">   3 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-LITERAL4">@@bar</span>
<span class="gutter">   4 </span><span class=
"syntax-OPERATOR">]$</span>
<span class="gutterH">   5 </span>  
<span class="gutter">   6 </span><span class=
"syntax-KEYWORD1">FUNC</span> foo1 <span class=
"syntax-OPERATOR">(</span> bar <span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">$[</span>
<span class="gutter">   7 </span>    <span class=
"syntax-KEYWORD1">LOCAL</span> <span class=
"syntax-MARKUP">@bar1</span>
<span class="gutter">   8 </span>    <span class=
"syntax-KEYWORD2">put</span><span class=
"syntax-KEYWORD3"> </span><span class=
"syntax-KEYWORD3">-to</span> <span class=
"syntax-MARKUP">@bar1</span> <span class=
"syntax-LITERAL4">@@bar</span>
<span class="gutter">   9 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-MARKUP">@bar1</span>
<span class="gutterH">  10 </span>    <span class=
"syntax-KEYWORD2">put</span> <span class=
"syntax-MARKUP">@bar1</span>
<span class="gutter">  11 </span><span class=
"syntax-OPERATOR">]$</span>
</span>
</pre>
  <p>the function <code>foo ( bar )</code> is incorrect, because
  the second reference to <code>@@bar</code> will find an empty
  stack:</p>

  <pre>
&gt; put -to ~ woof
&gt; foo ( ~ )
<em>woof
Ublu:1:UbluInterpreter.Thread[main,5,main]:SEVERE:ublu.util.Interpreter.loop():Command "put" threw exception null
java.util.EmptyStackException
        ...</em>
</pre>
  <p>whereas <code>foo1 ( bar )</code> is correct:</p>

  <pre>
   
&gt;  put -to ~ woof
&gt; foo1 ( ~ )
<em>woof
woof</em>
</pre>
  <h2><a name="Calling_Java" id="Calling_Java"></a>Calling
  Java</h2>

  <p>Ublu can call Java directly via the <a href=
  "./ubluref.html#calljava"><code>calljava</code></a> command. This
  allows the user to extend the language interpretively in nearly
  any direction desired. This is useful, because as I continually
  extend Ublu, it is not practical to support every option for
  every object in the JTOpen library with Ublu sytax</p>

  <p>For instance, at present writing, there is no Ublu
  dash-command to fetch the reply status of a queued message. Maybe
  I'll add that later, if I need it enough. For the present, if I
  need that reply status, I <code>calljava</code> on the queued
  message object easily obtainable from Ublu.</p>

  <pre>
&gt; <a href=
"./ubluref.html#as400">as400</a> -to @mysys MYSYS.ORG MYPROFILE MYPASSWORD
&gt; <a href=
"./ubluref.html#joblog">joblog</a> -to @jl -as400 @mysys -new MYJOBNAME MYUID 349989
&gt; joblog -to ~ -- @jl -length
&gt; joblog -- @jl -to ~ -qm 0 ~
&gt; FOR @i in ~ $[ calljava -obj @i -method getReplyStatus -to @result put @result ]$
</pre>
  <p>Of course, in this sort of programming, downloading and
  perusing the Ublu javadocs and JTOpen library javadocs is
  essential. In the example above, one would have to know that
  Ublu's <code>joblog -qm</code> is returning a collection of
  <code>com.ibm.as400.access.QueuedMessage</code> instances.</p>

  <h2><a name="Goublu" id="Goublu">Goublu</a>, the enhanced Ublu
  console</h2>

  <p>Goublu is a <a href="http://golang.org/">Go language</a> front
  end that launches Ublu and provides a better console interface to
  the running Ublu instance than the console support provided by
  Java.</p>

  <p>On most platforms, the Java console does not provide command
  line editing nor command line recall. Goublu provides both, along
  with other features such as macro expansion for commonly used
  command lines.</p>

  <p>While "plain" Ublu may be better for running Ublu
  applications, Goublu is a more congenial environment than "plain"
  Ublu for interactive Ublu usage.</p>

  <p>Goublu must be compiled on the specific platform. You can
  install the Go language development environment and follow the
  <a href="https://github.com/jwoehr/goublu">instructions to get
  Goublu and build it</a> on your machine.</p>

  <p><img src="images/goublu_screenshot.png" width="1013" height=
  "559" alt="Goublu Screenshot">
  </p>

  <h2><a name="Ublu_as_window" id="Ublu_as_window">Running Ublu as
  a window</a>
  </h2>

  <p>The <code>-w</code> switch on the Ublu command line starts
  Ublu as a windowing application. This is useful if you want to
  paste in and save out swatches of text. In other modes of
  development, it may be less congenial an environment that plain
  Ublu or the Goublu console front end for Ublu.</p>

  <p>When Ublu is started in windowing mode:</p>

  <ul>
    <li>No other command line options are processed.</li>

    <li>There is a large text area at the top.</li>

    <li>There is an Ublu input line at the bottom. Pressing enter
    on the input line will interpret the input.</li>

    <li>The entered input and Ublu output appear in the large text
    area.</li>

    <li>You can select text in the text area and choose the menu
    item <strong>Ublu-&gt;Interpret Selected</strong> and the
    selected text becomes input to Ublu.</li>

    <li>Multi-line input doesn't work in the input area. Functions,
    strings, blocks extending over multiple lines should be entered
    in the text area above, selected, and passed to Ublu via the
    menu item <strong>Ublu-&gt;Interpret Selected</strong>.</li>

    <li>You can save the contents of the text area or load a file
    into it at any time using the menu items of the
    <strong>File</strong> menu.</li>

    <li>You can change settings and save them in a property file.
    This property file can be loaded at startup as the argument to
    the <code>-w</code> switch that starts Ublu in windowing
    mode.</li>
  </ul>

  <p><img src="images/ubluwin.jpg" width="1058" height="455" alt=
  "Windowing Ublu">
  </p>

  <p>I use the following properties file
  <code>$HOME/.config/ublu/ubluwin.properties</code> on Ubuntu:</p>

  <blockquote>
    <pre>
<code>#Ublu Windowing Properties
#Sun Jul 02 18:00:59 MDT 2017
UbluTextAreaBGColor=ff000000
UbluTextAreaFGColor=e3e90000
UbluTextAreaFont=Liberation Mono
UbluInputAreaFontSize=16
UbluInputAreaFontStyle=0
UbluTextAreaFontStyle=0
UbluInputAreaBGColor=ff000000
UbluInputAreaFont=Liberation Mono
UbluTextAreaFontSize=16
UbluInputAreaFGColor=ff36b80b</code>
</pre>
  </blockquote>

  <p>When I start Ublu <code>java -jar /opt/ublu/ublu.jar -w
  $HOME/.config/ublu/ubluwin.properties</code> Ublu looks like
  this:</p>

  <p><img src="images/ubluprops.png" width="1057" height="659" alt=
  "">
  </p>

  <p><font size="+2"><strong>!!</strong></font> Windowing Ublu, you
  may wish to set <code>props -set signon.handler.type
  BUILTIN</code> so that on a password or username error Ublu
  prompts graphically instead of to the console. See the Ublu
  Reference on the <a href="ubluref.html/#props">props</a>
  command.</p>

  <h2><a name="Ublu_Android" id="Ublu_Android">Running Ublu on
  Android</a>
  </h2>

  <h3><a name="GNURootDebian" id="GNURootDebian">GNURootDebian
  (before Android 8)</a>
  </h3>

  <p><strong>Note:</strong> <em>GNURootDebian stopped working at
  Android 8 and the project was totally rewritten as <a href=
  "https://github.com/CypherpunkArmory/UserLAnd">UserLAnd</a>. See
  the <a href="#UserLAnd_Ubuntu">UserLAnd Ubuntu</a> section below
  for information on current technology.</em></p>

  <p>Ublu can run under <a href=
  "https://github.com/corbinlc/GNURootDebian">GnuRoot
  Debian</a>.</p>

  <ol>
    <li>Install GnuRoot Debian</li>

    <li>Open a GnuRoot Debian terminal</li>

    <li>Finish install steps as prompted</li>

    <li>Test Xwindowing support to confirm install of base system
    finished</li>

    <li><code>apt-get upgrade</code>
    </li>

    <li><code>apt update</code>
    </li>

    <li><code>apt upgrade</code>
    </li>

    <li>
      <code>apt install jedit</code>
      <ul>
        <li>This is the quickest way I have found to install Java
        under GnuRoot Debian.</li>
      </ul>
    </li>

    <li>Use ssh to copy your Ublu .zip archive to a directory such
    as <code>/opt/ublu</code></li>

    <li>Unpack archive</li>

    <li>Run Ublu from the terminal or open XWindows to run Ublu in
    a Window</li>
  </ol>

  <p>Learning GnuRoot Debian can require some patience. You may
  have to install manually via <code>apt</code> or
  <code>apt-get</code> some packages I have not mentioned
  above.</p>

  <table>
    <tr>
      <td><img src="images/Screenshot_2017-09-14-09-56-18.png"
      width="360" height="640" alt=
      "Ublu in a terminal under GnuRoot Debian on Android">
      </td>
      <td><img src="images/Screenshot_2017-09-12-17-05-56.png"
      width="375" height="640" alt=
      "Ublu in an xterm under GnuRoot Debian on Android">
      </td>
      <td><img src="images/Screenshot_2017-09-15-22-06-44.png"
      width="1024" height="600" alt=
      "Ublu in a window under GnuRoot Debian on Android">
      </td>
    </tr>

    <tr>
      <td><em>Ublu on GnuRoot Debian on Android</em>
      </td>
      <td><em>Ublu in an xterm under GnuRoot Debian on Android</em>
      </td>
      <td><em>Ublu in a window under GnuRoot Debian on Android</em>
      </td>
    </tr>
  </table>

  <h3><a name="UserLAnd_Ubuntu" id="UserLAnd_Ubuntu" userland=
  "">UserLAnd Ubuntu(Android 8 and above)</a>
  </h3>

  <p>The modern Linux environment on Android 8 and above is
  <a href="https://github.com/CypherpunkArmory/UserLAnd">UserLAnd</a>.</p>

  <p>UserLAnd is very solid and complete. The Ubuntu flavor even
  has Golang which allows us to build Goublu as well as Ublu. The
  procedure shown below allows you to build the current main branch
  of Ublu and Goublu. You can alternatively download a source
  release of either or both. You can even download a release build
  of Ublul, but if you want Goublu, you will have to build it.</p>

  <ul>
    <li>Install UserLAnd (Google Play Store).</li>

    <li>Open UserLAnd.</li>

    <li>Choose a distribution. This example assumes Ubuntu.</li>

    <li>Choose the ssh interface rather than the VNC interface. The
    VNC interface works fine and can be used later as well, it's
    just simpler for our purposes to start with a terminal
    interface.</li>

    <li><code>sudo apt install openjdk-11-jdk git maven make
    golang</code>
    </li>

    <li><code>cd &amp;&amp; mkdir work; cd work; mkdir gopath;
    export GOPATH=`pwd`/gopath</code>
    </li>

    <li><code>git clone https://github.com/jwoehr/ublu.git</code>
    </li>

    <li><code>cd ublu &amp;&amp; make dist # ublu.jar will be
    deposited in the 'target' subdirectory</code>
    </li>

    <li><code>go get github.com/jwoehr/goublu</code>
    </li>

    <li><code>cd $GOPATH/src/github/jwoehr/goublu</code>
    </li>

    <li><code>go build . &amp;&amp; go install # goublu will be
    installed in $GOPATH/bin</code>
    </li>

    <li><code>cd /opt &amp;&amp; sudo mkdir ublu &amp;&amp; cd ublu
    &amp;&amp; sudo ln -s $HOME/work/ublu/target/ublu.jar
    &amp;&amp; sudo ln -s $HOME/work/ublu/extensions &amp;&amp;
    sudo ln -s $HOME/work/ublu/extensions &amp;&amp;sudo ln -s
    $HOME/work/ublu/userdoc</code>
    </li>
  </ul>

  <p>Now you can start Ublu in line mode with <code>java -jar
  /opt/ublu/ublu.jar</code> or in Goublu terminal mode with
  <code>$GOPATH/bin/goublu</code>.</p>

  <p>If you want to run Ublu in windowing mode, you will use VNC
  Viewer which will require some setup.</p>

  <ol>
    <li>Install VNC Viewer from Google Play Store</li>

    <li>Open VNC Viewer. It will offer you the choice to create an
    account and subscribe, but that is not necessary for creating a
    local connection.</li>

    <li>Create a local connection for 127.0.0.1 port 5901 ... don't
    start the connection yet, because UserLAnd isn't serving
    yet.</li>

    <li>In a UserLAnd shell, perform the following:
      <ol>
        <li><code>sudo apt install xfonts-base</code>
        </li>

        <li><code>cd /usr/share/fonts/X11/misc/</code>
        </li>

        <li><code>sudo mkfontdir</code>
        </li>

        <li><code>sudo apt install tightvncserver</code>
        </li>

        <li><code>vncserver</code>
        </li>
      </ol>
    </li>

    <li>Now go to VNC viewer and start the local connection you
    defined.</li>

    <li>In UserLAnd execute
      <ol>
        <li><code>export DISPLAY=:1</code>
        </li>

        <li><code>java -jar /opt/ublu/ublu.jar -w</code>
        </li>
      </ol>
      to start windowed Ublu.
    </li>

    <li>Switch to the VNC Viewer and use windowed Ublu.</li>

    <li>When you are done with the VNC Viewer remember to execute
    <code>vncserver -kill :1</code> so that the vncserver cleans up
    after itself. If you shut down UserLAnd (e.g., by turning off
    your phone) without having exited the vncserver, you will have
    <code>rm -rf /tmp/.X11-unix</code> to clear the lockfile.</li>
  </ol>

  <p>VNC is a wrapper around the X Windowing System. UserLAnd
  Ubuntu's default windowing manager for the XWindowing System is
  <code>twm</code> which is pretty sparse. I'm using <a href=
  "https://www.fvwm.org/" target="_top">FVMW</a>.</p>

  <ul>
    <li><code>sudo apt install fvwm</code>
    </li>

    <li><code>update-alternatives --set x-window-manager
    /usr/bin/fvwm2</code>
    </li>
  </ul>

  <table>
    <tr>
      <td><img src="images/ublu_userland_20220203-130148.png"
      width="360" height="640" alt=
      "Ublu on UserLAnd Ubuntu on Android 8">
      </td>
      <td><img src="images/goublu_userland_20220203-133721.png"
      width="360" height="640" alt=
      "Goublu on UserLAnd Ubuntu on Android 8">
      </td>
      <td><img src="images/vnc_ubluwin.png" width="360" height=
      "640" alt="Ublu window UserLAnd Ubuntu (twm)on Android 8">
      </td>
    </tr>

    <tr>
      <td><em>Ublu on UserLAnd Ubuntu on Android 8</em>
      </td>
      <td><em>Goublu on UserLAnd Ubuntu on Android 8</em>
      </td>
      <td><em>Ublu window UserLAnd Ubuntu (twm) on Android 8</em>
      </td>
    </tr>
  </table>

  <h2><a class="mozTocH2" name="mozTocId722916" id=
  "mozTocId722916"></a>Notes</h2>

  <h3><a class="mozTocH3" name="mozTocId810320" id=
  "mozTocId810320"></a><a name="ublu.util.Interpreter.loop" id=
  "ublu.util.Interpreter.loop"></a><code>ublu.util.Interpreter.loop()</code>
  </h3>
  Here is the Java code (or some fairly recent version of same,
  consult the source) for the interpretive loop.

  <pre>
<span class="syntax0"><span class=
"gutter">1122 </span>    <span class="syntax-COMMENT3">/**</span>
<span class="gutter">1123 </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">*</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">The</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">processing</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">loop</span><span class=
"syntax-COMMENT3">,</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">processes</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">all</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">the</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">input</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">for</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">a</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">line</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">until</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">exhausted</span>
<span class="gutter">1124 </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">*</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">or</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">until</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">a</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">command</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">returns</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">a</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">command</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">result</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">indicating</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">failure</span><span class=
"syntax-COMMENT3">.</span>
<span class="gutterH">1125 </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class="syntax-COMMENT3">*</span>
<span class="gutter">1126 </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">*</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-LABEL">@return</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">the</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">last</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">command</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">result</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">indicating</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">success</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">or</span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3">failure</span><span class=
"syntax-COMMENT3">.</span>
<span class="gutter">1127 </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class=
"syntax-COMMENT3"> </span><span class="syntax-COMMENT3">*/</span>
<span class="gutter">1128 </span>    <span class=
"syntax-KEYWORD2">public</span> COMMANDRESULT <span class=
"syntax-FUNCTION">loop</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class=
"gutter">1129 </span>        COMMANDRESULT lastCommandResult <span class="syntax-OPERATOR">=</span> COMMANDRESULT.SUCCESS;
<span class=
"gutterH">1130 </span>        String initialCommandLine <span class="syntax-OPERATOR">=</span> <span class="syntax-FUNCTION">getArgArray</span><span class="syntax-OPERATOR">(</span><span class="syntax-OPERATOR">)</span>.<span class="syntax-FUNCTION">toHistoryLine</span><span class="syntax-OPERATOR">(</span><span class="syntax-OPERATOR">)</span>;
<span class="gutter">1131 </span>        <span class=
"syntax-KEYWORD1">while</span> <span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">!</span><span class=
"syntax-FUNCTION">getArgArray</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">isEmpty</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span> <span class=
"syntax-OPERATOR">&amp;</span><span class=
"syntax-OPERATOR">&amp;</span> <span class=
"syntax-OPERATOR">!</span>good_bye <span class=
"syntax-OPERATOR">&amp;</span><span class=
"syntax-OPERATOR">&amp;</span> <span class=
"syntax-OPERATOR">!</span><span class=
"syntax-FUNCTION">isBreakIssued</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutter">1132 </span>            <span class=
"syntax-COMMENT2">//</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">/*</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">Debug</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">*/</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">System.err.println("</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">arg</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">array</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">is</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">"</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">+</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">getArgArray());</span>
<span class="gutter">1133 </span>            <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span><span class=
"syntax-FUNCTION">getArgArray</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">isNextTupleNameOrPop</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class=
"gutter">1134 </span>                Tuple t <span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-FUNCTION">getArgArray</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">peekNextTupleOrPop</span><span class=
"syntax-OPERATOR">(</span><span class="syntax-OPERATOR">)</span>;
<span class="gutterH">1135 </span>                <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span>Autonome.<span class=
"syntax-FUNCTION">autonomize</span><span class=
"syntax-OPERATOR">(</span>t, <span class=
"syntax-FUNCTION">getArgArray</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutter">1136 </span>                    <span class=
"syntax-KEYWORD1">continue</span>;
<span class="gutter">1137 </span>                <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">else</span> <span class=
"syntax-OPERATOR">{</span>
<span class="gutter">1138 </span>                    <span class=
"syntax-FUNCTION">getLogger</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">log</span><span class=
"syntax-OPERATOR">(</span>Level.SEVERE, <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">non</span><span class=
"syntax-LITERAL1">-</span><span class=
"syntax-LITERAL1">autonomized</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">tuple</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">or</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">pop</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">:</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">{</span><span class=
"syntax-LITERAL1">0</span><span class=
"syntax-LITERAL1">}</span><span class=
"syntax-LITERAL1">"</span>, <span class=
"syntax-FUNCTION">getArgArray</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">next</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span><span class="syntax-OPERATOR">)</span>;
<span class=
"gutter">1139 </span>                    lastCommandResult <span class="syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE;
<span class="gutterH">1140 </span>                    <span class=
"syntax-KEYWORD1">break</span>;
<span class="gutter">1141 </span>                <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1142 </span>            <span class=
"syntax-OPERATOR">}</span>
<span class=
"gutter">1143 </span>            String commandName <span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-FUNCTION">getArgArray</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">next</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">trim</span><span class=
"syntax-OPERATOR">(</span><span class="syntax-OPERATOR">)</span>;
<span class="gutter">1144 </span>            <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span>commandName.<span class=
"syntax-FUNCTION">equals</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">"</span><span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutterH">1145 </span>                <span class=
"syntax-KEYWORD1">continue</span>; <span class=
"syntax-COMMENT2">//</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">cr</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">or</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">some</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">sort</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">of</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">whitespace</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">got</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">parsed,</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">skip</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">to</span><span class=
"syntax-COMMENT2"> </span><span class="syntax-COMMENT2">next</span>
<span class="gutter">1146 </span>            <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1147 </span>            <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span><span class=
"syntax-FUNCTION">getCmdMap</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">containsKey</span><span class=
"syntax-OPERATOR">(</span>commandName<span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class=
"gutter">1148 </span>                CommandInterface command <span class="syntax-OPERATOR">=</span> <span class="syntax-FUNCTION">getCmd</span><span class="syntax-OPERATOR">(</span><span class="syntax-LITERAL2">this</span>, commandName<span class="syntax-OPERATOR">)</span>;
<span class="gutter">1149 </span>                <span class=
"syntax-KEYWORD1">try</span> <span class="syntax-OPERATOR">{</span>
<span class="gutterH">1150 </span>                    <span class=
"syntax-FUNCTION">setArgArray</span><span class=
"syntax-OPERATOR">(</span>command.<span class=
"syntax-FUNCTION">cmd</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-FUNCTION">getArgArray</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span><span class="syntax-OPERATOR">)</span>;
<span class=
"gutter">1151 </span>                    lastCommandResult <span class="syntax-OPERATOR">=</span> command.<span class="syntax-FUNCTION">getResult</span><span class="syntax-OPERATOR">(</span><span class="syntax-OPERATOR">)</span>;
<span class="gutter">1152 </span>                    <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span>lastCommandResult <span class=
"syntax-OPERATOR">=</span><span class=
"syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE<span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class=
"gutter">1153 </span>                        <span class=
"syntax-KEYWORD1">break</span>; <span class=
"syntax-COMMENT2">//</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">we</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">exit</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">the</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">loop</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">on</span><span class=
"syntax-COMMENT2"> </span><span class=
"syntax-COMMENT2">error</span>
<span class="gutter">1154 </span>                    <span class=
"syntax-OPERATOR">}</span>
<span class="gutterH">1155 </span>                <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">catch</span> <span class=
"syntax-OPERATOR">(</span>IllegalArgumentException ex<span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutter">1156 </span>                    <span class=
"syntax-FUNCTION">getLogger</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">log</span><span class=
"syntax-OPERATOR">(</span>Level.SEVERE, <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Command</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">+</span> commandName <span class=
"syntax-OPERATOR">+</span> <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">threw</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">exception</span><span class=
"syntax-LITERAL1">"</span>, ex<span class=
"syntax-OPERATOR">)</span>;
<span class=
"gutter">1157 </span>                    lastCommandResult <span class="syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE;
<span class="gutter">1158 </span>                    <span class=
"syntax-KEYWORD1">break</span>;
<span class="gutter">1159 </span>                <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">catch</span> <span class=
"syntax-OPERATOR">(</span>java.lang.RuntimeException ex<span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutterH">1160 </span>                    <span class=
"syntax-COMMENT1">/*</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">java.net.UnknownHostException</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">lands</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">here,</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">as</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">well</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">as</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1"> </span><span class="syntax-COMMENT1">*/</span>
<span class="gutter">1161 </span> <span class=
"syntax-COMMENT1">/*</span><span class=
"syntax-COMMENT1"> </span><span class=
"syntax-COMMENT1">com.ibm.as400.access.ExtendedIllegalArgumentException</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">*/</span>
<span class="gutter">1162 </span>                    <span class=
"syntax-FUNCTION">getLogger</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">log</span><span class=
"syntax-OPERATOR">(</span>Level.SEVERE, <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Command</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">+</span> commandName <span class=
"syntax-OPERATOR">+</span> <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">threw</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">exception</span><span class=
"syntax-LITERAL1">"</span>, ex<span class=
"syntax-OPERATOR">)</span>;
<span class=
"gutter">1163 </span>                    lastCommandResult <span class="syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE;
<span class="gutter">1164 </span>                    <span class=
"syntax-KEYWORD1">break</span>;
<span class="gutterH">1165 </span>                <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1166 </span>            <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">else</span> <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span><span class=
"syntax-FUNCTION">getFunctorMap</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">containsKey</span><span class=
"syntax-OPERATOR">(</span>commandName<span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutter">1167 </span>                <span class=
"syntax-KEYWORD1">try</span> <span class="syntax-OPERATOR">{</span>
<span class=
"gutter">1168 </span>                    TupleNameList tnl <span class="syntax-OPERATOR">=</span> <span class="syntax-FUNCTION">parseTupleNameList</span><span class="syntax-OPERATOR">(</span><span class="syntax-OPERATOR">)</span>;
<span class="gutter">1169 </span>                    <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span>tnl <span class=
"syntax-OPERATOR">!</span><span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-LITERAL2">null</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class=
"gutterH">1170 </span>                        lastCommandResult <span class="syntax-OPERATOR">=</span> <span class="syntax-FUNCTION">executeFunctor</span><span class="syntax-OPERATOR">(</span><span class="syntax-FUNCTION">getFunctor</span><span class="syntax-OPERATOR">(</span>commandName<span class="syntax-OPERATOR">)</span>, tnl<span class="syntax-OPERATOR">)</span>;
<span class=
"gutter">1171 </span>                        <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span>lastCommandResult <span class=
"syntax-OPERATOR">=</span><span class=
"syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE<span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class=
"gutter">1172 </span>                            <span class=
"syntax-KEYWORD1">break</span>;
<span class=
"gutter">1173 </span>                        <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1174 </span>                    <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">else</span> <span class=
"syntax-OPERATOR">{</span>
<span class=
"gutterH">1175 </span>                        <span class=
"syntax-FUNCTION">getLogger</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">log</span><span class=
"syntax-OPERATOR">(</span>Level.SEVERE, <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Found</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">function</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">{</span><span class=
"syntax-LITERAL1">0</span><span class=
"syntax-LITERAL1">}</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">but</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">could</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">not</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">execute</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">it</span><span class=
"syntax-LITERAL1">"</span>, commandName<span class=
"syntax-OPERATOR">)</span>;
<span class=
"gutter">1176 </span>                        lastCommandResult <span class="syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE;
<span class=
"gutter">1177 </span>                        <span class=
"syntax-KEYWORD1">break</span>;
<span class="gutter">1178 </span>                    <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1179 </span>                <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">catch</span> <span class=
"syntax-OPERATOR">(</span>java.lang.RuntimeException ex<span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutterH">1180 </span>                    <span class=
"syntax-FUNCTION">getLogger</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">log</span><span class=
"syntax-OPERATOR">(</span>Level.SEVERE, <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Function</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">+</span> commandName <span class=
"syntax-OPERATOR">+</span> <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">threw</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">exception</span><span class=
"syntax-LITERAL1">"</span>, ex<span class=
"syntax-OPERATOR">)</span>;
<span class=
"gutter">1181 </span>                    lastCommandResult <span class="syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE;
<span class="gutter">1182 </span>                    <span class=
"syntax-KEYWORD1">break</span>;
<span class="gutter">1183 </span>                <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1184 </span>            <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">else</span> <span class=
"syntax-OPERATOR">{</span>
<span class="gutterH">1185 </span>                <span class=
"syntax-FUNCTION">getLogger</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">log</span><span class=
"syntax-OPERATOR">(</span>Level.SEVERE, <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Command</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1">{</span><span class=
"syntax-LITERAL1">0</span><span class=
"syntax-LITERAL1">}</span><span class=
"syntax-LITERAL4">\"</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">not</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">found</span><span class=
"syntax-LITERAL1">.</span><span class=
"syntax-LITERAL1">"</span>, commandName<span class=
"syntax-OPERATOR">)</span>;
<span class=
"gutter">1186 </span>                lastCommandResult <span class=
"syntax-OPERATOR">=</span> COMMANDRESULT.FAILURE;
<span class="gutter">1187 </span>                <span class=
"syntax-KEYWORD1">break</span>;
<span class="gutter">1188 </span>            <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1189 </span>        <span class=
"syntax-OPERATOR">}</span>
<span class="gutterH">1190 </span>        <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">!</span><span class=
"syntax-FUNCTION">isIncluding</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span> <span class=
"syntax-OPERATOR">&amp;</span><span class=
"syntax-OPERATOR">&amp;</span> <span class=
"syntax-OPERATOR">!</span>initialCommandLine.<span class=
"syntax-FUNCTION">isEmpty</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutter">1191 </span>            <span class=
"syntax-KEYWORD1">if</span> <span class=
"syntax-OPERATOR">(</span><span class=
"syntax-FUNCTION">getHistory</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span> <span class=
"syntax-OPERATOR">!</span><span class=
"syntax-OPERATOR">=</span> <span class=
"syntax-LITERAL2">null</span><span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutter">1192 </span>                <span class=
"syntax-KEYWORD1">try</span> <span class="syntax-OPERATOR">{</span>
<span class="gutter">1193 </span>                    <span class=
"syntax-FUNCTION">getHistory</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">writeLine</span><span class=
"syntax-OPERATOR">(</span>initialCommandLine<span class=
"syntax-OPERATOR">)</span>;
<span class="gutter">1194 </span>                <span class=
"syntax-OPERATOR">}</span> <span class=
"syntax-KEYWORD1">catch</span> <span class=
"syntax-OPERATOR">(</span>IOException ex<span class=
"syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">{</span>
<span class="gutterH">1195 </span>                    <span class=
"syntax-FUNCTION">getLogger</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">log</span><span class=
"syntax-OPERATOR">(</span>Level.WARNING, <span class=
"syntax-LITERAL1">"</span><span class=
"syntax-LITERAL1">Couldn</span><span class=
"syntax-LITERAL1">'</span><span class=
"syntax-LITERAL1">t</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">write</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">to</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">history</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">file</span><span class=
"syntax-LITERAL1"> </span><span class=
"syntax-LITERAL1">"</span> <span class=
"syntax-OPERATOR">+</span> <span class=
"syntax-FUNCTION">getHistory</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>.<span class=
"syntax-FUNCTION">getHistoryFileName</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span>, ex<span class=
"syntax-OPERATOR">)</span>;
<span class="gutter">1196 </span>                <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1197 </span>            <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1198 </span>        <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1199 </span>        <span class=
"syntax-FUNCTION">setGlobal_ret_val</span><span class=
"syntax-OPERATOR">(</span>lastCommandResult.<span class=
"syntax-FUNCTION">ordinal</span><span class=
"syntax-OPERATOR">(</span><span class=
"syntax-OPERATOR">)</span><span class="syntax-OPERATOR">)</span>;
<span class="gutterH">1200 </span>        <span class=
"syntax-KEYWORD1">return</span> lastCommandResult;
<span class="gutter">1201 </span>    <span class=
"syntax-OPERATOR">}</span>
<span class="gutter">1202 </span>
</span>
</pre><em>This guide is a work in progress ... continued
...</em><br>
</body>
</html>
