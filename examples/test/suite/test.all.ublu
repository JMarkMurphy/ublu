# test.all.ublu
# Test Suite for Ublu Midrange and Mainframe Life Cycle Extension language
# https://github.com/jwoehr/ublu
# Copyright (C) 2017 Jack J. Woehr http://www.softwoehr.com
# See the Ublu license (BSD-2 open source)

# Main function
# Takes filepath for defaults used in tests
# See test.defaults.example.ublu and customize to your setup
# test.all ( test_defaults_filepath work_dir outfile )
# ... test_defaults_filepath - path to configuration file for tests
# ... work_dir - where tests can create files and leave them
# ... ifspath - IFS path to report phsyical file from the tests

# Assumes it is run from example/test/suite
      
FUNC test.all ( test_defaults_filepath work_dir ifspath description ) $[
    LOCAL @testsys LOCAL @fmt LOCAL @testrptf
    
    include -s test_utils.ublu
    
    \\ ${ Customize to your setup }$
    include -s @@test_defaults_filepath
    
    \\ ${ Display our consts }$
    IF @showconst THEN $[ const -list ]$
      
    as400 -to @testsys -ssl @ssl *t_server *t_userprof *t_password
    
    createTestRecordFormat ( )
    
    \\ ${ debug }$ \\ ${ lifo -dup }$
    \\ ${ debug }$ \\ ${ put ~ }$
    \\ ${ debug }$ \\ ${ tuple -map }$
    
    tuple -assign @fmt ~
    
    \\ ${ debug }$ \\ ${ put @fmt }$
    
    createPF ( @testsys @@ifspath @fmt @@description )
    tuple -assign @testrptpf ~
    @testrptpf -open RW
    
    \\ ${ include t.as400.ublu t.as400 ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test as400 }$
    \\ ${ include t.ask.ublu t.ask ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test ask }$		
    \\ ${ include t.BREAK.ublu t.BREAK ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test BREAK }$		
    \\ ${ include t.bye.ublu t.bye ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test bye }$		
    \\ ${ include t.CALL.ublu t.CALL ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test CALL }$		
    \\ ${ include t.calljava.ublu t.calljava ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test calljava }$
    \\ ${ include t.cim.ublu t.cim ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test cim }$
    \\ ${ include t.cimi.ublu t.cimi ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test cimi }$
    \\ ${ include t.collection.ublu t.collection ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test collection }$		
    \\ ${ include t.commandcall.ublu t.commandcall ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test commandcall }$		
    \\ ${ include t.const.ublu t.const ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test const }$		
    \\ ${ include t.cs.ublu t.cs ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test cs }$		
    \\ ${ include t.db.ublu t.db ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test db }$		
    \\ ${ include t.dbug.ublu t.dbug ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test dbug }$		
    \\ ${ include t.defun.ublu t.defun ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test defun }$		
    \\ ${ include t.dict.ublu t.dict ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test dict }$		
    \\ ${ include t.DO.ublu t.DO ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test DO }$		
    \\ ${ include t.dpoint.ublu t.dpoint ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test dpoint }$		
    include -s t.dq.ublu t.dq ( @@work_dir @testsys @testrptpf )     \\ ${ test dq }$		
    \\ ${ include t.dta.ublu t.dta ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test dta }$		
    \\ ${ include t.ELSE.ublu t.ELSE ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test ELSE }$		
    \\ ${ include t.eval.ublu t.eval ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test eval }$		
    \\ ${ include t.exit.ublu t.exit ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test exit }$		
    \\ ${ include t.file.ublu t.file ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test file }$		
    \\ ${ include t.FOR.ublu t.FOR ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test FOR }$		
    \\ ${ include t.ftp.ublu t.ftp ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test ftp }$		
    \\ ${ include t.FUN.ublu t.FUN ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test FUN }$		
    \\ ${ include t.FUNC.ublu t.FUNC ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test FUNC }$		
    \\ ${ include t.gensh.ublu t.gensh ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test gensh }$		
    \\ ${ include t.help.ublu t.help ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test help }$
    \\ ${ include t.histlog.ublu t.histlog ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test histlog }$		
    \\ ${ include t.history.ublu t.history ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test history }$	
    \\ ${ include t.host.ublu t.host ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test host }$		
    \\ ${ include t.IF.ublu t.IF ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test IF }$		
    \\ ${ include t.ifs.ublu t.ifs ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test ifs }$		
    \\ ${ include t.include.ublu t.include ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test include }$		
    \\ ${ include t.interpret.ublu t.interpret ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test interpret }$		
    \\ ${ include t.jmx.ublu t.jmx ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test jmx }$		
    \\ ${ include t.job.ublu t.job ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test job }$		
    \\ ${ include t.joblist.ublu t.joblist ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test joblist }$		
    \\ ${ include t.joblog.ublu t.joblog ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test joblog }$		
    \\ ${ include t.jrnl.ublu t.jrnl ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test jrnl }$		
    \\ ${ include t.json.ublu t.json ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test json }$		
    \\ ${ include t.jvm.ublu t.jvm ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test jvm }$		
    include t.LOCAL.ublu t.LOCAL ( @@work_dir @testsys @testrptpf )     \\ ${ test LOCAL }$		
    \\ ${ include t.license.ublu t.license ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test license }$		
    \\ ${ include t.lifo.ublu t.lifo ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test lifo }$		
    \\ ${ include t.list.ublu t.list ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test list }$		
    \\ ${ include t.monitor.ublu t.monitor ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test monitor }$		
    \\ ${ include t.msg.ublu t.msg ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test msg }$		
    \\ ${ include t.msgq.ublu t.msgq ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test msgq }$		
    \\ ${ include t.num.ublu t.num ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test num }$		
    \\ ${ include t.objlist.ublu t.objlist ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test objlist }$		
    \\ ${ include t.objdesc.ublu t.objdesc ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test objdesc }$		
    \\ ${ include t.outq.ublu t.outq ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test outq }$		
    \\ ${ include t.ppl.ublu t.ppl ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test ppl }$		
    \\ ${ include t.printer.ublu t.printer ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test printer }$		
    \\ ${ include t.programcall.ublu t.programcall ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test programcall }$		
    \\ ${ include t.props.ublu t.props ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test props }$		
    \\ ${ include t.put.ublu t.put ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test put }$		
    include -s t.record.ublu t.record ( @@work_dir @testsys @testrptpf )     \\ ${ test record }$		
    \\ ${ include t.rs.ublu t.rs ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test rs }$		
    \\ ${ include t.savf.ublu t.savf ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test savf }$		
    \\ ${ include t.savef.ublu t.savef ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test savef }$		
    \\ ${ include t.savesys.ublu t.savesys ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test savesys }$		
    \\ ${ include t.server.ublu t.server ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test server }$		
    \\ ${ include t.session.ublu t.session ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test session }$
    \\ ${ include t.sleep.ublu t.sleep ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test sleep }$		
    \\ ${ include t.smapi.ublu t.smapi ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test smapi }$		
    \\ ${ include t.sock.ublu t.sock ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test sock }$		
    \\ ${ include t.spoolf.ublu t.spoolf ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test spoolf }$		
    \\ ${ include t.spoolflist.ublu t.spoolflist ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test spoolflist }$		
    \\ ${ include t.string.ublu t.string ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test string }$		
    \\ ${ include t.subsys.ublu t.subsys ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test subsys }$		
    \\ ${ include t.SWITCH.ublu t.SWITCH ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test SWITCH }$		
    \\ ${ include t.system.ublu t.system ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test system }$		
    \\ ${ include t.sysval.ublu t.sysval ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test sysval }$		
    \\ ${ include t.TASK.ublu t.TASK ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test TASK }$		
    \\ ${ include t.test.ublu t.test ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test test }$		
    \\ ${ include t.thread.ublu t.thread ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test thread }$		
    \\ ${ include t.THEN.ublu t.THEN ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test THEN }$		
    \\ ${ include t.THROW.ublu t.THROW ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test THROW }$		
    \\ ${ include t.tn5250.ublu t.tn5250 ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test tn5250 }$		
    \\ ${ include t.trace.ublu t.trace ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test trace }$		
    \\ ${ include t.TRY.ublu t.TRY ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test TRY }$		
    \\ ${ include t.tuple.ublu t.tuple ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test tuple }$		
    \\ ${ include t.user.ublu t.user ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test user }$		
    \\ ${ include t.userlist.ublu t.userlist ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test userlist }$		
    \\ ${ include t.WHILE.ublu t.WHILE ( @@work_dir @testsys @testrptpf ) }$     \\ ${ test WHILE }$
    
    @testrptpf -close
    @testsys -disconnect
]$